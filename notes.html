<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Level up your front end development</title>

	<link rel="stylesheet" href="lib/css/monokai.css">
	<link rel="stylesheet" href="css/fonts.css">

	<script src="js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>


	<style>
		*, *::before, *::after {
			box-sizing: border-box;
		}

		body {
			font-family: 'Raleway', Arial, Helvetica, sans-serif;
			font-size: 20px;
		}

		code {
			font-size: 16px;
		}

		.incomplete {
			background: red;
			color: white;
		}

		.needs-example {
			background: blue;
			color: white;
		}

		.in-draft {
			background: #74f7f0e3;
			color: #666;
		}

		.needs-review {
			background: #aaf3aa;
		}

		.example {
			border: 2px solid black;
			border-radius: 8px;
		}
		.example .element {
			border: 4px solid black;
			border-radius: 8px;
			background-color: hsl(350, 60%, 70%);
			transition: all 1s;
		}
		.example .element.highlight {
			background-color: hsl(170, 60%, 70%);
		}

		.flex {
			display: flex;
		}
		.grid {
			display: grid;
		}

	</style>
</head>
<body>
	<h1>Level up your front end development</h1>

	<div>Contents</div>
	<ul>
		<li><a href="#disclaimer">Disclaimer</a></li>
		<li><a href="#clean-code">Clean code</a></li>
		<li><a href="#modern-javascript">Modern JavaScript</a></li>
		<li><a href="#architecting-applications">Architecting applications</a></li>
		<li><a href="#testing">Testing</a></li>
		<li><a href="#semantic-html">Semantic HTML & accessibility</a></li>
		<li><a href="#understanding-css">Understanding CSS</a></li>
		<li><a href="#css-layouts">CSS layouts</a></li>
		<li><a href="#conclusion">Wrap up</a></li>
	</ul>

	<section class="needs-review">
		<h2 id="disclaimer">Disclaimer</h2>

		<p>
			This workshop contains a bunch of stuff that I think is important to understand to become a 
			good front end developer. Some of it - like how <code>Array.prototype.reduce</code> works - is 
			fact. However, some of it - like when you should create a function - is my opinion, based on 
			experience. And some of it - like the accessibility stuff - contains some good rules of thumb,
			but isn't really the complete story.
		</p>

		<p>
			The point isn't to memorise everything here and apply it exactly as described. The point is that these 
			are things that you should think about, and work out the best approach for your situation. Code written 
			for production in an enterprise organisation demands much different standards than code written at home 
			to try and learn a new topic. You need to work out what's going to be most helpful for you and your team.
		</p>

		<p>
			That said, the opinions given here should give you a decent starting point. If you don't currently have 
			an opinion on one of the topics we discuss here, feel free to just take mine and use it, while you work 
			out your own. And if you do already have an opinion, I'd encourage you to think about <i>why</i> you have 
			that opinion, and if there's anything else you might want to consider. (Even if your opinion agrees with 
			mine!)
		</p>
	</section>

	<section class="needs-review">
		<h2 id="clean-code">Clean code</h2>

		<p>
			Clean code is code that is easy to understand and maintain. The term comes from the book 
			<i>Clean Code</i> by Robert Martin. Writing clean code is about going beyond writing code that 
  		<i>works</i>, to writing coding that is great for the next person to work on. As Martin Fowler says
		</p>

		<blockquote>
			Any fool can write code that a computer can understand. 
			Good programmers write code that humans can understand.
		</blockquote>

		<p>
			Clean code
		</p>
		<ul>
			<li>makes its intent clear</li>
			<li>doesn't do unexpected things</li>
			<li>is broken up logically</li>
		</ul>

		<h3>Signalling intent & self-documenting code</h3>

		<p>
			According to a 1979 study (quoted in Steve McConnell's <i>Code Complete</i>)
			<q>understanding the original programmer's intent was the most difficult problem</q>.
			Working out what the previous dev was trying to do is usually key to understanding bugs, 
			and is also important when adding new features, or updating existing ones. Fortunately, there 
			are a bunch of different options available to us to try and express our intent. 
		</p>

		<p>Here's a couple of options, ranked by some important factors</p>

		<table>
			<th>
				<td></td><td>low</td><td>medium</td><td>high</td>
			</th>
			<tr>
				<td>discoverability</td>
				<td>
					<div class="doc external" aria-label="external docs"></div>
				</td>
				<td>
					<div class="doc readme" aria-label="readme"></div>
				</td>
				<td>
					<div class="doc comments" aria-label="code comments"></div>
					<div class="doc code" aria-label="code itself"></div>
				</td>
			</tr>
			<tr>
				<td>finding the relevant information</td>
				<td></td>
				<td>
					<div class="doc external" aria-label="external docs"></div>
					<div class="doc readme" aria-label="readme"></div>
				</td>
				<td>
					<div class="doc comments" aria-label="code comments"></div>
					<div class="doc code" aria-label="code itself"></div>	
				</td>
			</tr>
			<tr>
				<td>confidence it's up-to-date</td>
				<td><div class="doc external" aria-label="external docs"></div></td>
				<td>
					<div class="doc readme" aria-label="readme"></div>
					<div class="doc comments" aria-label="code comments"></div>
				</td>
				<td>
					<div class="doc code" aria-label="code itself"></div>
				</td>
			</tr>
		</table>
		<table>
			<thead>Key</thead>
			<tr><th>External documentation</th><td><div class="doc external"></div></td></tr>
			<tr><th>README</th><td><div class="doc readme"></div></td></tr>
			<tr><th>Code comments</th><td><div class="doc comments"></div></td></tr>
			<tr><th>Code itself</th><td><div class="doc code"></div></td></tr>
		</table>

		<p>
			As you can see from the table above, the closer to the code your documentation is,
			the easier it is to discover, the easier it is to find the relevant information, and 
			the easier it is to trust that it's been kept up-to-date and relevant. The logical 
			conclusion of this is that the code itself is the best way to signal your intent.
		</p>

		<p>
			Of course, not all code is actually good at signalling intent, so we're going to look
			at some things you can do to help with this.
		</p>

		<h4>Use names that are descriptive, concise and unambiguous</h4>

		<ul>
			<li>
				<strong>Don't use acronyms or abbreviations.</strong> It might be obvious to you what you
				mean, but will it be obvious to the next developer? What if they're a junior? Or someone who
				is new to the domain? I've been working at my current employer for over a year now, and I still 
				have no idea what MIRN stands for. Even in cases where someone could work out what the abbreviation 
				stood for, you're making them use extra brain-power, and they might need that brain-power for 
				something that's legitimately difficult. Just use the whole word - your IDE can autocomplete it for 
				you if the typing gets too much.
			</li>
			<li>
				<strong>Don't add superfluous junk to your names.</strong> Don't add type suffixes, like Obj, 
				Str, or Arr. For a start, they're abbreviations, and we already agreed not to use abbreviations.
				But also, your IDE knows the type. It can tell you everything you need to know.
			</li>
			<li>
				<strong>Avoid generic names</strong>. Names like <code>data</code>, <code>items</code>, 
				<code>x</code> don't convey any meaning. Pick something descriptive. (I usually make an 
				exception to this rule for loop indices - I think <code>i</code> is commonly-enough understood 
				as a loop index to cause no confusion. That said, I rarely use loop indices, as we'll see later on.)
			</li>
			<li>
				<strong>Name things consistently.</strong> A <code>message</code> and a <code>notification</code> should 
				be different things. Using synonyms to refer to the same object just adds ambiguity to your code. It's 
				not clear to a new developer whether those things refer to the same thing, or which name they should use 
				for the new thing that they're creating.
			</li>
		</ul>

		<h4>Don't be surprising</h4>

		<ul>
			<li>
				<strong>Functions should do what they say they do.</strong> I shouldn't need to read through your 
				function to work out what it does. As we already discussed, it should have a descriptive, concise, 
				and unambiguous name. But you also need to make sure it doesn't do anything <i>else</i>. <div class="needs-example">
					an example of a function with an unintended side-effect
				</div>
			</li>
			<li>
				<strong>Don't reuse variables</strong>, even if the two uses seem related. Discovering that a variable 
				suddenly refers to something else is surprising, and not the good kind of surprise. For example, if you have 
				a function named <code>element()</code> that returns an element, don't be tempted to do something like 
				<pre><code>
					var element = element('div');
				</code></pre>
				You've turned a function into an object and that's potentially going to confuse the hell out of someone later.
			</li>
			<li>
				<strong>Follow established patterns.</strong> Human brains are good at optimising for patterns. Ensuring
				your code follows established patterns makes it easier to process. This could mean project-specific things,
				like following established punctation and indenting rules, or maintaing the existing file structure.
				But it can also mean following more generic patterns. If you have a status called <code>ENABLED</code>,
				then the opposite is <code>DISABLED</code>, not <code>OFF</code>, or <code>OUT</code> or anthing else. 
				Similarly, if you have function called <code>login()</code>, then its partner should be <code>logout()</code>,
				not <code>logOut()</code>, or <code>signout()</code>, or anything else.
			</li>
		</ul>

		<h3>Increase your signal-to-noise ratio</h3>

		<p>
			The signal-to-noise ratio refers to how much of your code conveys actual meaning to the reader, compared
			to the amount that is just boilerplate, or repeating something that's been conveyed elsewhere. 
			Meaningless code is all that stuff that you just skip over when you're reading the code, because it's
			not helpful.
		</p>

		<p>
			We can improve the signal-to-noise ratio by either increasing the signal (adding meaning), or reducing
			the noise (removing the useless stuff). (Or, ideally, both!)
		</p>

		<p>
			Often, you can increase the signal-to-noise ratio by reducing the amount of code that you write.
			Code like
		</p>

		<pre><code>
let isParentNode;
if (hasChildren(node)) {
	isParentNode = true;
} else {
	isParentNode = false;
}
		</code></pre>

		<p>can be greatly simplified down to</p>

		<pre><code>const isParentNode = hasChildren(node)</code></pre>

		<p>
			It's not always quite as obvious as this, but it's worth keeping an eye out for this pattern. 
			Often, your IDE or linter can spot (and autofix) things like this for you.
		</p>

		<p>
			Another way you can increase the signal to noise ratio, is by moving the "noise" away from the signal.
			For example, imagine we had a function like the following, which checks if a file is valid, and 
			then posts it to the server if it is:
		</p>

		<pre><code>
				const match = file.name.match(/\.[a-z]+$/);
				let extension;
				if (match && match.length > 0) {
					extension = match[0];
				} 
				let valid;
				if (extension === 'jpg' || extension === 'jpeg' || extension === 'png' || extension === 'svg') {
					valid = true;
				}
				if (file.size > MAX_SIZE) {
					valid = false;
				}
				if (valid) {
					const formData = new FormData();
					formData.append('files[]', file);
					fetch(URL, {
						method: 'POST',
						body: formData,
					})
				}
		</code></pre>

		<p>
			You can probably make out what's going on, but it's not... great. We can improve it by moving the "noise"
			of the implementation details away from the main decision flow.
		</p>


		<pre><code>
			...
			
			if (isFileValid(file.name, file.size)) {
				sendFile(file);
			}

			...

			function isFileValid(name, size) {
				const match = filename.match(/\.[a-z]+$/);
				let extension;
				if (match && match.length > 0) {
					extension = match[0];
				} 

				const validFileTypes = ['jpg', 'jpeg', 'png', 'svg'];
				let valid = validFileTypes.includes(extension);

				if (fileSize > MAX_SIZE) {
					valid = false;
				}
			}

			function sendFile(file) {
				const formData = new FormData();
				formData.append('files[]', file);
				fetch(URL, {
					method: 'POST',
					body: formData,
				})
			}
		</code></pre>

		<p>
			Here, the function names act like a kind of outline of what's going on: if the file is valid, 
			then send it. If we need to know the details about how we determine if a file is valid, or how 
			we send a file, then we can look inside the functions. But generally, when you're reading code, 
			you're looking for a high level overview, then dipping into a deeper level when you get to the bit 
			that interests you. Structuring your code with functions that hide implementation details like this 
			makes that easier to do.
		</p>

		<p>
			We've also added meaning in the file validation code by replacing the lengthy if statement with 
		</p>

		<pre><code>
			const validFileTypes = ['jpg', 'jpeg', 'png', 'svg'];
			let valid = validFileTypes.includes(extension);
		</code></pre>

		<p>
			Adding the <code>validFileTypes</code> variable adds extra meaning to our code, and the list check is 
			much shorter, and easier to read, than the if statement. Plus, it's now easier to add or remove valid
			file types.
		</p>

		<p class="needs-example">
			There are also a few techniques we can use to reduce the noise in our code. For example, heavy 
			indenting adds a lot of noise and makes your code harder to understand. Reducing indenting by 
			factoring out to functions and returning early can make it much eaiser to follow.
		</p>

		<pre><code>
			deeply nested code
		</code></pre>

		<p class="needs-example">Instead, we can just do all our validity checks up front...</p>

		<pre><code>
			returning early
		</code></pre>

		<p>
			Using JavaScript idioms is another way to potentially reduce noise in code. For example, something 
			like 
		</p>

		<pre><code>
			let name = user.getName();
			if (name === undefined) {
				name = 'hey you';
			}
		</code></pre>

		<p>
			can be simplified to
		</p>

		<pre><code>
				const name = user.getName() || 'hey you';
		</code></pre>

		<p>
			(If you're not familiar with the <code>||</code> shortcut, in JavaScript <code>||</code> returns the first truthy value,
			or the last value, if none of them are truthy. In this case, if <code>user.getName()</code> returns a value, then we'll get that 
			value. Otherwise, we'll get 'hey you'.)
		</p>

		<p>
			A couple of things to keep in mind when using idioms like this though:
		</p>
		<ul>
			<li>
				The two code snippets aren't exactly equivalent. The second version will replace any falsey value with 'you' - including null, or 
				empty string. In this case, this is probably the behaviour that you want, and the second version is actually more robust. This 
				won't always be the case though.
			</li>
			<li>
				You're aiming to make the code easier to understand. Sometimes there is a fine line between idiomatic code and "clever" code, which 
				is short, but difficult to understand. For example, nested ternary operators might make your code shorter than using if statements, 
				but they're almost certainly more difficult to understand. If you're not sure - ask someone else to have a look!
			</li>
		</ul>

		<p>
			Here are a few more JavaScript idioms you should be familiar with:
		</p>

		<ul>
			<li>Using <code>||</code> to set defaults (like we did above)</li>
			<li>
				Using <code>&&</code> for null-checking. <code>&&</code> will return the first falsey value, or the last value if all values are truthy.
				So, we can do null-checking like
				<pre><code>const name = user && user.name && user.name.firstName;</code></pre>
				If either <code>user</code> or <code>user.name</code> are null or undefined, then <code>name</code> will be null or undefined. Otherwise, 
				it will have the value of <code>user.name.firstName</code>
			</li>
			<li>
				Convert to boolean via <code>!!</code>. The negation operator (<code>!</code>) converts a value to boolean. So 
				<code>!someTruthyValue</code> equals <code>false</code>. <code>!!</code> sets it back to the boolean equivalent of its initial value.
				So <code>!!someTruthyValue</code> equals <code>true</code>.
			</li>
			<li>
				You can convert a string to a number using unary <code>+</code>.
				<pre><code>const age = +document.getElementById('age').value;</code></pre>
				Converting a non-numeric value will result in <code>NaN</code>, so make sure your code includes the appropriate checks.
			</li>
			<li>
				Creating a copy via JSON. Generally speaking, the fastest way to make a copy of an object in JavaScript is to use
				<pre><code>const copy = JSON.parse(JSON.stringify(myObjectToCopy))</code></pre>
				Yes, it looks like a hack, but it's such a common use case that browsers have actually optimised it to be faster.
				Just bear in mind that if your object has any function properties, those won't be stringified, so they won't appear in the copy. If you 
				want to make a copy of an object with function properties, you can use object destructuring
				<pre><code>const copy = {...myObjectToCopy}</code></pre>. However, this will only create a shallow copy! (We'll look into object 
				destructuring a bit more later).
			</li>
		</ul>

		<h3>Don't repeat yourself</h3>

		<p>
			Perhaps the most effective way you can reduce noise in your code, though, is by DRYing out your code. If you've not heard of DRY before, it stands 
			for "Don't Repeat Yourself". At its most fundamental, this means that you shouldn't implement the same logic twice in your code. Instead, factor 
			the repeated logic out into a function, class, or module.
		</p>

		<p>
			There are several reasons why you want to avoid repeated logic in your code.
		</p>

		<ul>
			<li>More code means more things that can go wrong</li>
			<li>Having logic implemented in multiple places means it's more work to update it when things change</li>
			<li>Similarly, it's more work to fix bugs, as they will need to be fixed multiple times</li>
			<li>
				There is a high risk that your implementations will get out of sync. This is particularly problematic as there is 
				no way for future devs to know which implementation is correct, or why they're different.
			</li>
		</ul>

		<pre class="needs-example"><code>
			an example where DRYing code makes it better
		</code></pre>

		<p>
			Be careful when you're DRYing out your code that the logic you're coalescing really is the same logic. If the new function takes in a 
			lot of parameters, which then get used in a lot of conditionals, there's a good chance the logic is actually different.
		</p>

		<pre class="needs-example"><code>
			an example of logic that wasn't really the same so DRYing it didn't help
		</code></pre>

		<p>
			And it's not just code you should be thinking about. Comments which repeat the same information as the code gives us suffer from the 
			same problems as repeated logic. They don't add any real value, and they run the risk of getting out of sync and actually providing 
			negative value.
		</p>

		<pre class="needs-example"><code>JS doc comments and what you might do instead</code></pre>

		<aside>
			<h3>Other types of documentation</h3>

			<p>
				None of this is to say that other types of documentation aren't useful. Code comments are often 
				useful for explaining <i>why</i> you did something, or adding some extra clarity.
			</p>

			<pre><code class="css">
				.menu .item {
					outline-offset: -2px; /* ensure focus ring doesn't get cut off by overflow: hidden
				}
			</code></pre>

			<p>
				JSDoc-type comments are valuable, if you're building a library and want to expose the API to
				your users. READMEs are essential for describing how the app works in generic terms, how to get 
				it up and running, and any guides for contributing. When creating these guides, don't just describe 
				how to get the system up and running - include information like the URL to go to, and any login 
				information required.
			</p>
				
			<p>
				Finally, external documentation can be helpful if you need to provide documentation to people who 
				don't have access to your source control for some reason, or if your documentation relates to 
				multiple apps in different repositories - like a collection of micro-frontends or micro-services.
				However, I would strongly recommend storing the documentation in source control (where it's easy for 
				devs to update) and linking to it from your README. Otherwise, in a month's time, it's going to be 
				out of date, and in two months' time, nobody is even going to know it exists.
			</p>

			<p>
				The exception to this, of course, is the kind of pointless documentation you're required to produce so 
				somebody can tick a box. Nobody's going to read it, so put in the minimum effort you can, and immediately 
				forget about it.
			</p>
		</aside>

		<h3>Design your code with humans in mind</h3>

		<p>
			Most studies show that humans can really only hold 4-5 things in our working memory at a time
			(<a href="https://en.wikipedia.org/wiki/Working_memory#Capacity">Working memory capcity on Wikipedia</a>).
			This means that we can really only keep track of that many things easily. However, we also have the ability to "chunk" data - that is to 
			group a number of pieces of data together, and think of them as a single piece. For example, most people would struggle a bi 
			remembering a list of eight single-digit numbers. But remembering two 4-digit years is fairly trivial.
		</p>

		<p>
			How can this help us write code? We can break our code up into logical units that only deal with 4-5 variables.
		</p>

		<p class="needs-example">
			One way to do this is to keep variables as local as possible. If you've got a function that deals with 10 variables, then don't 
			declare them until you actually need to use them. 
		</p>

		<p>
			Better than this though, is not to have functions with ten variables in them. As we talked about earlier, we can factor out 
			functionality into other functions - essentially using chunking to turn a lot of information into a manageable amount. We can also 
			do this on multiple levels. We could factor out the functionality of a group of related functions into a class, or a component. And we can 
			factor out multiple classes and components into a module.
		</p>

		<p>
			The important principle here is that each unit (function, component, class, or module) should only do one thing. In object-oriented programming,
			this is knows as the Single Responsibility Principle, which states that a class should only have one reason to change. Now, JavaScript isn't 
			an object-oriented language, and I don't actually think that description is that helpful, but I do think that following the Single 
			Responsibility Principle does make your code easier to understand and reason about.
		</p>

		<p>
			So, how do we decide what "one thing" is? Unfortunately, I can't give you a hard and fast rule, here - it's a bit of a judgement call.
			There are a few things that can hint that your unit of code could benefit from being split up though.
		</p>

		<ul>
			<li>
				It's hard to name. Are you having trouble coming up with a name that describes all the functionality of your component?
				Does your class have a very generic name <code>System</code> or <code>Manager</code>? Does your function have a name with a conjunction in 
				it (like 'and', 'or', 'if', or 'when')?
			</li>
			<li>
				Does your function or class have a heap of variables? <span class="needs-example">Sometimes</span>, this is inevitable, but it's always 
				a sign you should at least think about whether it needs splitting.
			</li>
			<li class="needs-example">
				Are you covering multiple levels of abstraction? 
			</li>
			<li>
				Is your code deeply nested? As we discussed earlier, more than one or two levels of nesting is a good sign you should consider factoring 
				some functionality out into another function, which a nice, descriptive name.
			</li>
			<li class="needs-example">
				Does your function have a flag parameter? A flag parameter is usually a boolean value that is used to change the behaviour of a function.
				Flag parameters make your code harder to understand, because it's not really clear what the function is doing from the name alone. And 
				they're a pretty good indicator that the function is doing two things.
			</li>
		</ul>

		<p>
			A corollary of the idea that we only want 4-5 variables in scope at once is that we want our functions to take as few parameters as possible. 
			It's very easy to understand what a function with no parameters is doing. But it's a bit impractical to only use functions with no parameters.
			So functions with one or two parameters are ok too. Using three or more parameters greatly increases the cognitive load of using your function. 
			It's harder to understand what's going on, because there's more in scope, and it's harder to use your function, as we've got to remember what 
			more parameters do. The smart context in your IDE can help mitigate this a little, but it's still not ideal.
		</p>

		<p class="needs-example">
			However, if you do need to pass a lot of stuff into a function, don't forget that we can rely on our old friend chunking!
		</p>

		<p class="needs-example">
			One final thing to remember, when factoring out into new classes, is that we want to favour composition over inheritance. We prefer to share 
			functionality by composing classes from a number of lower-level classes, rather than using inheritance. Using composition makes our objects more 
			flexible, as things don't need to be in the same family tree to share stuff. It also makes them easier to understand as everything at a given 
			level of abstraction is in the same place, instead of being spread across a parent class and child class.
		</p>

		<h3>Refactoring code & testing</h3>

		<p>
			One last note on the topic of clean code: keeping your code base clean is going to require refactoring your code, a lot.
			In order to do this reliably, you're going to need good tests, which test the intent of your code, not your implementation. One way to 
			achieve this is to use Test Driven Development (TDD). I highly recommend that you at least give TDD a shot, even if you don't end up 
			using it all the time. I find it particularly helpful when fixing bugs, and writing new utility code. I find it less helpful when I'm 
			writing new components, or anything that involves a lot of HTML & CSS.
		</p>

		<p>
			If you're working with legacy code which doesn't have good test coverage, things are a bit trickier. Often, it's incredibly difficult to work 
			out what the original author's intent was. In these cases, I recommend writing tests that test the current behaviour (whether it's correct or 
			not), and working against those. Make sure you clearly communicate that this is what you're doing.
		</p>

		<p>
			When it comes time to actually do the refactoring, smaller is better. Refactor a small piece of code, and check that it still works. Then do 
			another small piece. Once you've done a few small pieces you can combine them into a larger refactor. Ideally though, you should be able to 
			drop your refactoring work at just about any point, and still have functioning code.
		</p>

		<p>
		 And finally, make deliberate decisions about what code you're going to refactor. Generally speaking, only refactor code that you're actually 
		 touching. It might be tempting to re-write that 1000-line component written in archaic JavaScript with inconsistent naming everywhere, but if 
		 it's actually working ok, then you're more likely to just introduce bugs. If you find yourself needing to make changes to it, then feel free to 
		 factor out parts of it, but don't try and do the whole thing. Our goal is to create code that is easy to reason about and change, but not at the 
		 cost of breaking existing functionality.
		</p>
	</section>
	
	<section class="in-draft">
		<h2 id="modern-javascript">Modern JavaScript</h2>

		<p>
			JavaScript underwent a fairly serious update in 2015, which introduced a lot of new features into the language. Since then, it has 
			had incremental additions every year, to ensure the language continues to update and evolve without the significant overhead of 
			the ES6 update. Some of these new features add brand new functionality to the language, but many of them are actually intended to 
			make it easier to follow the clean code principles we just discussed - making our code easier to reason about by making it less 
			surprising, and increasing the signal-to-noise ratio by removing boilerplate and introducing standard methods to do things.
		</p>

		<p>Today, we're going to have a look at a few of these new features, and how how they can help us write cleaner code.</p>

		<h3>Declaring variables</h3>

		<p>
			ES6 introduced two new ways to declare variables in JavaScript - <code>let</code> and <code>const</code>. So, how do we know which 
			one to use?
		</p>

		<p>
			Well, there's one simple rule: <strong>don't use <code>var</code></strong>. Like, ever.
		</p>

		<p>
			The reason for this has to do with the way that variables are scoped - that is the part of your code that a particular variable is 
			accessible in. No matter whether you use <code>var</code>, <code>let</code>, <code>const</code>, your variable will be available in the 
			current scope, and any child scopes, unless they are shadowed.
		</p>

		<p class="needs-example">What does that mean?</p>
		<ul>
			<li>
				Code that is outside of any function or module is considered the global scope. All other scopes are children of the global scope.
				This means that if you declare a variable in the global scope, it will be available in all other scopes.
			</li>
			<li>
				Code that is inside a module (<code>&lt;script type="module"&gt;</code>), but not inside any function, is module scoped. Any function 
				declared inside a module is a child scope of that module. So a module-scoped variable would be available anywhere in that module, including
				inside any functions.
			</li>
			<li>
				Code that is declared inside a function is scoped to that function. Other functions declared inside the original function are child 
				scopes of that function. A function-scoped variable is available inside the top-level function, as well as any child functions. In fact,
				this is what closures are - using a variable scoped to the parent function from inside a child function.
			</li>
		</ul>

		<p>
			What about shadowing? Shadowing occurs when a child scope contains a variable with the same name as a variable in the parent scope.
			In this case, the parent-scoped variable is no longer available in the child scope. Generally speaking, this is something you want to
			avoid, as it means you have one name referring to two different things.
		</p>

		<p>
			So how do <code>let</code> and <code>const</code> differ from <code>var</code>? <code>let</code> and <code>const</code> introduce a new 
			level of scoping - the block scope. A block scope is anything in curly brackets - like a function body, an if statement, or a loop body.
			Variables declared with <code>let</code> or <code>const</code> are block-scoped. They are accessible inside the current block, and any 
			child block scopes - such as nested conditionals, or functions declared within this block.
		</p>

		<p>What does this mean in practice? With <code>var</code> it is possible to do the following:</p>

		<pre><code>
			for (var i = 0; i < 10; i++) {
				try {
					processItem(items[i]);
				} catch (e) {
					break;
				}
			}
			console.log(`Successfully processed ${i} items`);
		</code></pre>

		<p>or</p>

		<pre><code>
			var hour = (new Date()).getHours();
			if (hour < 13) {
				var greeting = 'Good morning!';
			} else {
				var greeting = 'Good afternoon!';
			}
			console.log(greeting);
		</code></pre>

		<p>
			In the first example, we're declaring the variable <code>i</code> inside the <code>for</code> loop, then accessing it outside 
			the loop. In the second example, we're declaring the variable <code>greeting</code> in two different places.
		</p>

		<p>
			This might seem like a handy feature. (I know I find the second one tempting when I'm building strings conditionally!) However, this isn't how 
			variables work in most languages, so it makes our code a little more suprising. More importantly though, it's confusing because variables appear 
			to be being used in higher scopes than the one they were declared in. Especially in the second example, you have to read what's going on 
			inside the conditional blocks to be able to understand what's going on outside, which is the inverse of how code normally works.
		</p>

		<p>
			<code>let</code> and <code>const</code> remove the possibility of doing this.
		</p>

		<pre><code>
			for (let i = 0; i < 10; i++) {
				try {
					processItem(items[i]);
				} catch (e) {
					break;
				}
			}
			console.log(`Successfully processed ${i} items`);
		</code></pre>

		<p>
			will result in Uncaught ReferenceError: i is not defined. You'll get a similar error if you try to declare <code>message</code> with 
			either <code>let</code> or <code>const</code> in the second example. (You'll get a different error if you try to use <code>const</code>
			as a counter in a standard for loop).
		</p>

		<p>
			Ok, so we should never use <code>var</code>. But should we use <code>let</code>, or <code>const</code>? This one is actually the subject of 
			a bit of debate. To understand the debate though, we need to understand the difference between the two.
		</p>

		<p>
			If you're not familiar with <code>let</code> and <code>const</code>, <code>let</code> works basically the same as <code>var</code>, except 
			with block scoping. <code>const</code>, on the other hand, creates a "constant" - a variable that can't be reassigned to new value. This 
			makes <code>const</code> ideal for things like defining magic numbers, and you should definitely use it for that.
		</p>

		<pre><code>const GST = 0.1;</code></pre>

		<p>
			However, this doesn't mean that any variable declared with <code>const</code> is immutable. If you declare an object with <code>const</code>,
			you can't reassign it to another object, but you can change the properties of that object.
		</p>

		<pre><code>
			const person; // Uncaught SyntaxError: Missing initializer in const declaration

			const person = { name: 'Amy Pond' };
			person = { name: 'River Song' }; // Uncaught TypeError: Assignment to constant variable

			person.name = 'Rose Tyler'; // perfectly fine
		</code></pre>

		<p>
			So, given this difference, the JavaScript community is basically split into two camps: prefer <code>let</code>, or prefer <code>const</code>.
		</p>

		<p>
			The prefer <code>let</code> camp use <code>let</code>, unless they specifically want to convey that something is constant, in which case 
			they use <code>const</code>. This essentially makes the <code>const</code> declaration more meaningful.
		</p>

		<p>
			The prefer <code>const</code> camp, on the other hand, use <code>const</code> unless the variable specifically needs to be re-assigned. 
			The argument for this comes from functional programming. Reassigning variables to new values adds "surprise" to your code, makes it harder 
			to reason about, and can introduce subtle bugs. Instead of changing existing variables, we should just create new ones, with new, descriptive
			names. In this camp, <code>let</code> is really only used in situations like assigning things conditionally, or building strings.
		</p>

		<pre><code>
			const hours = (new Date()).getHours();
			let greeting;
			if (hours < 13) {
				greeting = 'Good morning!';
			} else {
				greeting = 'Good afternoon!';
			}
		</code></pre>

		<p>
			In an ideal world, we'd probably even get rid of this one <code>let</code>, like so:
		</p>

		<pre><code>
			const hours = (new Date()).getHours();
			const isMorning = hours < 13;
			const greeting = isMorning ? 'Good morning!' : 'Good afternoon!';
		</code></pre>

		<p>
			I personally prefer <code>const</code>. I think it encourages a cleaner style of coding, as shown above. Additionally, if you prefer 
			<code>const</code>, you're never going to accidentally going to declare a constant using <code>let</code>. If you prefer <code>let</code>,
			you're relying on humans to know when something must be constant.
		</p>

		<p>
			That said, it's really not a big deal. There are plenty of smart people on both sides of the debate, and the difference isn't a going to
			matter in most cases. Just pick one and run with it.
		</p>

		<p>
			One final word on refactoring code that uses <code>var</code>: While I definitely recommend converting your <code>vars</code> to <code>let</code>
			or <code>const</code>, be careful about it. The kinds of bugs you can introduce by changing the scope of a variable are quite subtle. I 
			recommend using an automated tool like a linter.
		</p>

		<h3>Array functions</h3>

		<p>
			ES6 also added a bunch of new functions to <code>Array.prototype</code>, for looping through and manipulating data. These functions 
			let us write cleaner code by allowing us to write more declarative code. Declarative code describes <i>what</i> the code should do,
			rather than <i>how</i> to do it. CSS and SQL are both declarative languages.
		</p>

		<p>
			The advantage of declarative code, is that it hides the implementation details that we're not interested in. For example, 
			<code>Array.protoype.forEach</code> allows us to do something for each item in an array, without worrying about the details of how
			the loop actually works. Or, to put it another way, it increases the signal-to-noise ratio.
		</p>
			
		<p>
			Of course, there is also a downside to declarative programming - you have less control. In the case of <code>forEach</code>, you 
			can't have a loop counter that is incremented by 2 each time, for example. 
		</p>

		<p>
			Let's have a look at some examples of declarative coding using JavaScript's array functions, and why they're nicer than the traditional 
			way of doing things. We'll start with <code>Array.prototype.forEach</code>, as it's conceptually the simplest.
		</p>

		<h4><code>Array.prototype.forEach</code></h4>
		
		<pre><code>myList.forEach((item, index, list) => ...do something... )</code></pre>

		<p>
			<code>Array.prototype.forEach</code> is a generic loop that will call your callback function on each item in the given list.
			The callback function will be passed the current item, the index of the current item, and the list itself. You <i>can</i> change 
			the list from within the loop, but I strongly recommend against it, as it makes your code weird and hard to understand.
		</p>
		 
		<p>
			So, how does it work? Imagine we want to log a list of results to the console. In traditional JavaScript, we might do that something like 
			this...
		</p>

		<pre><code>
			const results = ['pass', 'pass', 'fail', 'pass'];
			for (let i = 0; i < results.length; i++) {
				const result = results[i];
				console.log(result);
			}
		</code></pre>

		<p>Using <code>forEach</code>, that would look like...</p>

		<pre><code>
			const results = ['pass', 'pass', 'fail', 'pass'];
			results.forEach(result => console.log(result));
		</code></pre>

		<p>
			You can see we get as much signal as the first example, but with much less noise. 
		</p>

		<p>
			Now, this is a super-contrived example. The reason for this is that <code>forEach</code> is a very generic function, which returns nothing.
			The only thing it can do is produce side-effects. While this might be useful for something like logging, in most cases you're going to want 
			to use one of the other functions.
		</p>

		<h4><code>Array.prototype.map</code></h4>

		<pre><code>myList.map((item, index, list) => ... return a boolean ...)</code></pre>

		<p>
			<code>Array.prototype.map</code> gives us the ability to convert each item in an array into a new item, while leaving the original 
			array untouched. React apps use <code>map</code> extensively to convert objects into HTML elements. You can also use it to extract 
			specific properties from objects in an array.
		</p>

		<p>Converting between different objects, in traditional JavaScript</p>
		<pre><code>
			const animals = ['bear', 'cat', 'giraffe'];
			const elements = [];

			for (let i = 0; i < animals.length; i++) {
				const animal = animals[i];
				const div = createDiv(animal);
				elements.push(div);
			}

			function createDiv(animal) {
				const element = document.createElement('div');
				element.innerText = animal;
				return element;
			}
		</code></pre>

		<p>Converting between different objects, using <code>map</code></p>
		<pre><code>
			const animals = ['bear', 'cat', 'giraffe'];
			const elements = animals.map(animal => createDiv(animal));

			function createDiv(animal) {
				const element = document.createElement('div');
				element.innerText = animal;
				return element;
			}
		</code></pre>

		<p>Extracting properties, in traditional JavaScript</p>
		<pre><code>
			const users = [
				{ givenName: 'Phillip', familyName: 'Fry', occupation: 'delivery boy' },
				{ givenName: 'Turunga', familyName: 'Leela', occupation: 'captain' },
				{ givenName: 'Bender', familyName: 'Rodrigues', occupation: 'bending robot' }
			];
			const names = [];

			for (let i = 0; i < users.length; i++) {
				const user = users[i];
				const name = `${user.givenName} ${user.familyName}`;
				names.push(name);
			}
		</code></pre>

		<p>Extracting properties, using <code>map</code></p>
		<pre><code>
			const users = [
				{ givenName: 'Phillip', familyName: 'Fry', occupation: 'delivery boy' },
				{ givenName: 'Turunga', familyName: 'Leela', occupation: 'captain' },
				{ givenName: 'Bender', familyName: 'Rodrigues', occupation: 'bending robot' }
			];
			const names = users.map(user => `${user.firstName} ${user.lastName}`);
		</code></pre>

		<p>We can actually simplify this even more, using object destructuring (which we'll go into shortly)</p>
		<pre><code>const names = users.map(({firstName, lastName}) => `${firstName} ${lastName}`)</code></pre>

		<h4><code>Array.prototype.find/findIndex & Array.prototype.filter</code></h4>

		<pre><code>myList.find((item, index, list) => ... return a boolean ...)</code></pre>
		<pre><code>myList.findIndex((item, index, list) => ... return a boolean ...)</code></pre>
		<pre><code>myList.filter((item, index, list) => ... return a boolean ...)</code></pre>

		<p>
			A super common task in JavaScript is to find a particular item an array. Imagine we had list of accounts and we wanted 
			to find the one belonging to a particular user. In traditional JavaScript, we could do something like...
		</p>

		<pre><code>
			let userAccount;
			for (let i = 0; i < accounts.length; i++) {
				const account = accounts[i];
				if (account.name === name) {
					userAccount = account;
					break;
				}
			}
		</code></pre>

		<p><code>Array.prototype.find</code> greatly simplifies this.</p>

		<pre><code>const userAccount = accounts.find(account => account.name === name)</code></pre>

		<p>Similarly, if you would prefer to find the index of an item, rather than the item itself, you can use <code>findIndex</code>.</p>

		<pre><code>
			an example where you have two arrays and you findIndex in one to retrieve a value from the other
		</code></pre>

		<p>
			Sometimes, you don't just want to find the first item that matches your criteria - you want to find all the matching items.
			For example, imagine you had a list of postcodes, and you wanted to find all the ones that are in Queensland. (Postcodes in 
			Queensland all start with '4'). The postcodes are stored as strings.
		</p>

		<p>In traditional JavaScript, we could do this something like...</p>

		<pre><code>
			const queenslandPostcodes = [];
			for (let i = 0, i < postcodes.length; i++) {
				const postcode = postcodes[i];
				if (postcode.startsWith(4)) {
					queenslandPostcodes.push(postcode);
				}
			}
		</code></pre>

		<p>(The String prototype got a bunch of new declarative methods too - <code>startsWith</code> is one of those)</p>

		<p>Using <code>Array.prototype.filter...</code></p>

		<pre><code>const queenslandPostcodes = postcodes.filter(postcode => postcode.startsWith('4');</code></pre>

		<h4><code>Array.prototype.some and Array.prototype.every</code></h4>

		<pre><code>myList.some((item, index, list) => ... return a boolean ...)</code></pre>
		<pre><code>myList.every((item, index, list) => ... return a boolean ...)</code></pre>

		<p>
			Often, you want to check whether any item in an array meets a specific criterion. For example, imagine you have a form where the 
			user needs to enter some contact details. They can add a physical address, an email address, a phone number, or a Twitter handle.
			You want to check that they've entered at least one before you submit the form.
		</p>

		<p>In traditional JavaScript, that usually looks something like this</p>

		<pre><code>
			const inputs = document.querySelectorAll('.contact');

			let hasContactMethod = false;
			for (let i = 0; i < inputs.length; i++) {
				const input = inputs[i];
				if (!!input.value) {
					hasContactMethod = true;
					break;
				}
			}
		</code></pre>

		<p>We can simplify this using <code>Array.prototype.some</code></p>

		<pre><code>
			const inputs = document.querySelectorAll('.contact');
			const hasContactMethod = Array.from(inputs).some(input => !!input.value);
		</code></pre>

		<p>
			Note we're using <code>Array.from</code> to convert the <code>NodeList</code> returned by <code>document.querySelectorAll</code>
			into an actual array. Array functions will only work on true arrays, but just about anything that looks like an array can be converted to one.
		</p>

		<p>
			On the other hand, sometimes we want to check that <i>everything</i> in the array meets the criterion. For example, imagine we have 
			an order that contains a list of books. If all the books are digital, then we don't want to go through the shipping flow.
		</p>

		<p>In traditional JavaScript...</p>

		<pre><code>
			let allDigital = true;

			for (let i = 0; i < items.length; i++) {
				const item = items[i];
				if (!isDigitalMedia(item)) {
					allDigital = false;
					break;
				}
			}
		</code></pre>

		<p>
			You might notice that this is essentially the same code as the previous example, will all the trues and falses around the other way.
			As such, we could implement it using an inversion of <code>some</code>.
		</p>

		<pre><code>
			const allDigital = !items.some(item => !isDigitalMedia(item));
		</code></pre>

		<p>This is pretty confusing though. <code>Array.prototype.every</code> lets us do the same thing, without all the the <code>!</code>s.</p>

		<pre><code>
			const allDigital = items.every(item => isDigitalMedia(item));
		</code></pre>

		<p>Or, even better</p>

		<pre><code>const allDigital = items.every(isDigitalMedia)</code></pre>

		<p>
			Remember, if you don't need to define your callbacks inline. You can always define them somewhere else and just pass in the function name.
			It doesn't matter what you call the parameters of your callback function - the first one will get the value of the current item. If you declare 
			a second and third parameter, they'll get the value of the index of the current item and the list itself respectively. If you declare fewer than
			three parameters, then the index and/or list values just won't be available in your function. It won't cause any errors. And if you declare more 
			than three parameters, the remainder will just be undefined. JavaScript is very forgiving with function parameters. This can be a good thing and 
			a bad thing.
		</p>

		<h4><code>Array.prototype.includes</code></h4>

		<pre><code>myList.includes(myItem)</code></pre>
		<pre><code>myString.includes(substring)</code></pre>

		<p>
			We've already seen a couple of ways to check whether an item exists in an array, but here's another one.
			This one is often preferable, because it's much simpler. However, it does have a drawback. It uses reference equality to check 
			whether the item you're searching for is the same as the one in the array. This means it's going to work great for strings and 
			numbers, and not so much for objects.
		</p>

		<p>Imagine that we want to check whether a user has a specific role. In traditional JavaScript, you might do somethign like...</p>

		<pre><code>
			const isAdmin = user.roles.indexOf(Roles.ADMIN) > -1;
		</code></pre>

		<p>Using <code>includes</code> allows us to tidy this up a bit</p>

		<pre><code>const isAdmin = user.roles.includes(Roles.ADMIN)</code></pre>

		<p>This function can be particularly useful when combined with <code>map</code> extracting a primitive value, like the following example</p>

		<pre><code>
			const someoneHasACat = users.map(user => user.pet).includes('cat');
		</code></pre>

		<p>
			And it also exists on <code>String.prototype</code>, so you can use it check for the existence of substrings. The String protoype also 
			includes new methods to check specifically whether the substring occurs at the start or end of the string.
		</p>

		<pre><code>
			'elephant'.includes('ant'); // true 
			'elephant'.startsWith('ant'); // false
			'elephant'.endsWith('ant'); // true
		</code></pre>

		<h4><code>Array.prototype.reduce</code></h4>

		<pre><code>myList.reduce((acc, curr) => { ... do stuff ... }, startingValue);</code></pre>

		<p>
			This is the most flexible of the array functions - all the others can actually be implemented using <code>reduce</code>.
			Unfortunately, it's also a little tricky to understand.
		</p>

		<p>
			Unlike the other array functions, <code>reduce</code> takes two parameters: a callback, which is called for every item in the 
			list, and a starting value, which is passed into the callback on the first call.
		</p>

		<p>
			The callback also takes two parameters: the accumulated value, and the current value. The current value is the next item in the list.
			The first time the callback is called, the accumulated value is the starting value passed into <code>reduce</code>. Every other time, 
			it's the value returned from the previous pass of the callback.
		</p>

		<p>The traditional example for demonstrating <code>reduce</code> is to sum the values in an array, so let's look at that.</p>

		<pre><code>
			const numbers = [2, 7, 3];
			const total = numbers.reduce((sum, number) => sum + number, 0); // 12
		</code></pre>

		<p>Let's break it down step by step</p>

		<ol>
			<li>The callback is called with the starting value and the first number: (0, 2) => 0 + 2, which returns 2</li>
			<li>The callback is called with the previous returned value, and the second number: (2, 7) => 2 + 7, which returns 9</li>
			<li>The callback is called with the previous returned value, and the third number: (9, 3) => 9 + 3, which returns 12, our final value</li>
		</ol>

		<p class="needs-example">
			While summing up arrays is undeniably useful, <code>reduce</code> can be used for other things too.
			appending nodes to dom via document fragment?
			However, bear in mind that reduce can be quite tricky to understand, so use it sparingly.
		</p>

		<h4>Async array functions</h4>

		<p>
			While these new array functions provide a fantastic way to write cleaner code, there is one small gotcha you should be aware of:
			using array functions with <code>async/await</code>.
		</p>

		<p>
			When you use <code>async/await</code> in a traditional loop, like this
		</p>

		<pre><code>
			async function setPrices(items) {
				for (let i = 0; i < items.length; i++) {
					const item = items[i];
					const price = await getPrice(item.id);
					item.price = price;
				}
			}
		</code></pre>

		<p>
			The loop will pause on each iteration, wait for the price to be returned, and then continue.
		</p>

		<p>
			If you do the equivalent thing using <code>forEach</code>
		</p>

		<pre><code>
			function setPrices(items) {
				items.forEach(async (item) => {
					const price = await getPrice(item.id);
					item.price = price;
				});
			}
		</code></pre>

		<p>
			You'll notice that it's the callback function that is <code>async</code> in this case. This is because 
			<code>await</code> can only be used immediately inside an <code>async</code> function. This means that 
			the callback function will fire off the request to fetch the price, and then immediately continue to the 
			next item, without waiting for the response to come back.
		</p>

		<p>
			Now, in this situation, that's probably the behaviour that you want. This code is going to fetch all the 
			prices in parallel, which is going to be faster than fetching them one-by-one, as in the traditional loop.
			However, you've got no way of knowing when all the prices have finished being fetched!
		</p>

		<p>
			If we do need to know when the prices have all been fetched, we can take advantage of the fact that an 
			<code>async</code> function always returns a Promise, which resolves when the function returns.
		</p>

		<pre><code>
			async function setPrices(items) {
				const promises = items.map((item) => {
					const price = await getPrice(item.id);
					item.price = price;
				});

				await Promise.all(promises);
			}
		</code></pre>

		<p>
			This code will 
		</p>
		<ol>
			<li>Generate a promise for each item in the list, and add it to the <code>promises</code> array</li>
			<li>Wait until all of the promises in the <code>promises</code> array have been resolved before returning</li>			
		</ol>

		<p>And, at the same time</p>
		<ol>
			<li>Fetch all of the prices in parallel</li>
			<li>Resolve each promise in the <code>promises</code> array, once the price has been set for the related item</li>
		</ol>

		<p>
			However, sometimes this parallel behaviour isn't what you want. Instead, you want to wait for each request 
			to return before making the next request. In these cases, you're better off using a more traditional loop. However,
			there is a more declarative version of the <code>for</code> loop available in JavaScript.
		</p>

		<pre><code>
			for (const item of items) {
				try {
					await placeOrder(item);
				} catch (e) {
					console.log('Couldn\'t place all orders. Giving up.');
					break;
				}
			}
		</code></pre>

		<p>
			This code will wait until each order has been successfully placed before placing the next order. If any order fails, it will 
			give up. This type of loop still removes some of the boilerplate associated with your basic <code>for</code> loop, and will 
			work with anything array-like (including our <code>NodeList</code> from above).
		</p>

		<p>Two things to note, in order of importance</p>
		<ol>
			<li>
				This is a <code>for ... of</code> loop. It is a different beast to a <code>for ... in</code> loop, and should not be confused with
				it. If you can think of a way to remember which is which, I'd love to hear it.
			</li>
			<li>
				You can declare your <code>item</code> using <code>const</code>, if you want. This is due to the way scope works in <code>for</code>
				loops in JavaScript. Check out this <a href="https://www.youtube.com/watch?v=Nzokr6Boeaw">HTTP203 video on for loops</a> if you're 
				interested to understand why.
			</li>
		</ol>

		<h3>Other ways to reduce noise</h3>

		<p>
			Modern JavaScript also has a bunch of "shorthand" features - essentially ways to increase the signal-to-noise ratio of your code 
			by removing boilerplate and repetition. Some of them can seem a little hard to wrap your head around at first. I strongly encourage 
			you to learn how they work though, and then decide for yourself whether using them makes your code cleaner or not. If you do decide 
			you like them, you might also want to consider adding linter rules enforcing their usage.
		</p>

		<h4>Object property shorthand</h4>

		<p>
			Probably the simplest to wrap your head around - the object property shorthand can be used when you have an object property whose 
			name and value are the same. It allows you to omit the value, leading to less repeated code.
		</p>

		<pre><code>
			const name = 'Leia Organa';

			// old JavaScript
			const request = { name: name };

			// with shorthand 
			const request = { name };
		</code></pre>

		<p>
			While this shorthand is usually straightforward to understand, it can get confusing when you're using a mixture of 
			shorthand and non-shorthand values. In these cases, a bit of formatting can be very helpful.
		</p>

		<pre><code>
			// a bit confusing
			const request = { method: 'GET', name, birthDate, accountNumber: accountId, accountType };

			// better 
			const request = {
				method: 'GET',
				name,
				birthDate,
				accountNumber: accountId,
				accountType
			};
		</code></pre>

		<h4>Object and array destructuring</h4>

		<p>
			While the object property shorthand makes it easier to create objects, object destructuring makes it easier to extract things 
			out of objects. Imagine that we have an account object like so...
		</p>

		<pre><code>
			const account = {
				name: 'Ellen Ripley',
				type: 'PHONE',
				number: '34352';
			}
		</code></pre>

		<p>We can extract the properties into variables like </p>

		<pre><code>
			const name = account.name; // 'Ellen Ripley'
			const type = account.type; // 'PHONE'
			const number = account.number; // '34352'
		</code></pre>

		<p>We can now do this...</p>

		<pre><code>
			const { name, type, number } = account;

			console.log(name); // 'Ellen Ripley'
			console.log(type); // 'PHONE'
			console.log(number); // '34352'
		</code></pre>

		<p>
			This code will create three new variables - <code>name</code>, <code>type</code>, and <code>number</code>. It will set the value of these 
			variables to the values of the properties of <code>account</code> which have the same names. 
		</p>

		<p>
			We can also use destructuring when the property name is not the same as the variable name we want to use.
		</p>

		<pre><code>
			const { number: id } = account;

			console.log(id); // '34352'
		</code></pre>

		<p>
			Note that the property name goes first, the variable being declared second. So here, we declaring a variable named <code>id</code>, which is 
			taking the value of <code>account.number</code>. I personally find this a little confusing, and would think twice about using it.
		</p>

		<p>
			We can also extract properties that are nested inside the target object.
		</p>

		<pre><code>
			const user = {
				name: 'Princess Zelda',
				contactDetails: {
					type: 'TWITTER'
					value: '@zelda'
				}
			};

			const { contactDetails: { value }} = user;
			console.log(value); // '@zelda'
		</code></pre>

		<p>You can even combine nested values with renaming values.</p>

		<pre><code>
			const { contactDetails: { value: twitterHandle }} = user;

			console.log(twitterHandle); // '@zelda'
		</code></pre>

		<p>However, at this point, I would be seriously considering if this is really better than just using </p>

		<pre><code>
			const twitterHandle = user.contactDetails.value;
		</code></pre>

		<p>
			One place, however, where I think object destructuring is particularly useful, is in function parameters.
			Imagine we have a function that receives a config option like so...
		</p>

		<pre><code>
			function makeRequest(config) {
				const method = config.method;
				const url = config.url;

				const request = { method, url };

				if (method === 'POST') {
					request.body = config.body;
				}
			}
		</code></pre>

		<p>We can simplify this using object destructuring!</p>

		<pre><code>
			function makeRequest({ method, url, body }) {
				const request = { method, url };

				if (method === 'POST') {
					request.body = body;
				}
			}
		</code></pre>

		<p>
			Not only does this save us from assigning the variales manually, it also makes it clear 
			which properties the config object should have.
		</p>

		<p>
			But, wait, there's more! Objects aren't the only thing that can be destructured - we can do the same thing with arrays!
			For example, the new <code>Object.entries</code> function returns the properties of an object as a array or arrays 
			containing the property name and value.
		</p>

		<pre><code>
			const account = {
				name: 'Ellen Ripley',
				type: 'PHONE',
				number: '34352';
			}

			const properties = Object.entries(account);
			console.log(properties); // [['name', 'Ellen Ripley'], ['type', 'PHONE'], ['number', '34352']];
		</code></pre>

		<p>Array destructuring can make processing these properties simpler.</p>
		
		<pre><code>
			const firstProperty = properties[0];
			const [name, value] = firstProperty;

			console.log(name); // 'name'
			console.log(value); // 'Ellen Ripley'
		</code></pre>

		<p>We can use array destructing on function parameters as well</p>

		<pre><code>
			const copyOfAccount;

			properties.forEach(([name, value]) => {
				copyOfAccount[name] = value;
			});
		</code></pre>

		<p>Array destructuring can also be used to swap variables without using a temp variable.</p>

		<p>Traditional JavaScript...</p>
		<pre><code>
			let leftPane = viewport;
			let rightPane = devTools;

			// traditional swap 
			let temp = leftPane;
			leftPane = rightPane;
			rightPane = leftPane;

			console.log(leftPane); // devTools
			console.log(rightPane); // viewport;
		</code></pre>

		<p>With array destructuring...</p>
		
		<pre><code>
			let leftPane = viewport;
			let rightPane = devTools;

			[leftPane, rightPane] = [rightPane, leftPane]
		</code></pre>

		<p>I don't think I've ever run into an actual use case for this, but you can totally do it, if you need to.</p>

		<h4>Rest parameters & the spread operator</h4>

		<p>
			Rest and spread are essentially the same operator, used in different situations. They're used for converting groups of things into 
			arrays or objects, and vice versa. Both are represented by three dots (...).
		</p>

		<p>
			Rest parameters are used to convert an array into a list of arguments, or to convert a list of arguments into an array. This is helpful 
			when dealing with functions which can accept any number of arguments. For example, the built-in function <code>Math.min()</code> takes 
			any number of numbers and returns the lowest.
		</p>

		<pre><code>console.log(Math.min(4, 63, -2, 0, -79)) // -79</code></pre>

		<p>
			This isn't super practical in a lot of situations though as we can't use <code>Math.min</code> to find the lowest number in an array of numbers.
			Historically, if we wanted to do that, we'd probably sort the array, then take the first value. Rest parameters simplify this problem for us 
			a little. Here, we can use it to find the cheapest item in a list of items.
		</p>

		<pre><code>
			const prices = items.map(({price}) => price);
			const cheapestPrice = Math.min(...prices);
			const cheapestItem = items.find(({price}) => price === cheapestPrice);
		</code></pre>

		<p>In this code we</p>
		<ol>
			<li>Convert the list of items into a list of prices, using object destructuring of the parameter</li>
			<li>Find the lowest price, by converting the array of prices into a list of arguments for <code>Math.min</code></li>
			<li>Find the cheapest item, by findind the item with the cheapest price! (Again using object destructuring)</li>
		</ol>

		<p>
			Rest parameters also work the other way - to convert a list of arguments into an array. For example, we could define a <code>sum</code>
			function, which takes any number of arguments, and converts them into an array.
		</p>

		<pre><code>
			function sum(...numbers) {
				numbers.reduce((total, number) => total + number, 0);
			}

			console.log(sum(4, 9, 17, 23)); // 53
		</code></pre>

		<p>
			Generally speaking, I think rest parameters are more useful in the first case - passing an array into an existing function that doesn't 
			accept an array. The second case essentially takes a function that works with an array, and makes it look like it doesn't work with an 
			array. You'd want to think very carefully about why you're doing that.
		</p>

		<p>
			The other thing that <code>...</code> can do is act as a spread operator. The spread operator converts an array into a kind of "array fragment"
			that can then be used inside another array. We can use this for concatenating arrays, or for adding new values to an array.
		</p>

		<pre><code>
			const cats = ['Burmese', 'Siamese', 'Ragdoll'];
			const dogs = ['Labrador', 'Husky', 'Kelpie'];

			const pets = [...cats, ...dogs];
			console.log(pets); /// ['Burmese', 'Siamese', 'Ragdoll', 'Labrador', 'Husky', 'Kelpie'];

			const moreDogs = [...dogs, 'Shiba Inu', 'Beagle'];
			console.log(moreDogs); // ['Labrador', 'Husky', 'Kelpie', 'Shiba Inu', 'Beagle'];
		</code></pre>

		<p>
			If it helps, you can think of the spread operator as creating a copy of your array, and stripping off the brackets.
		</p>

		<p>
			The spread operator can also be used on objects. In that case, it essentially creates a copy and removes the curly braces.
			You can use this for extending objects with more properties.
		</p>

		<pre><code>
			const person = {
				name: 'Amy Wong',
				birthday: '2978-12-03'
			};

			const employee = {
				...person,
				role: 'intern'
			};

			console.log(employee); // { name: 'Amy Wong', birthday: '2978-12-03', role: 'intern' }
		</code></pre>

		<p>
			Because the spread operator makes a copy of the array or object, you can also use it for... creating copies! 
			Just bear in mind that it's only going to create a shallow copy. If you want to create a deep copy, you can use		
			<code>JSON.parse(JSON.stringify(myThing))</code>, as long as none of your properties are functions.
		</p>

		<pre><code>
			const birbs = ['Canary', 'Rosella', 'Galah'];
			const copyOfBirbs = [...birbs];

			const size = {
				height: 47,
				width: 23
			};
			const copyOfSize = {...size};
		</code></pre>

		<h4>Default parameter values</h4>

		<p>
			The last topic I wanted to touch on in this section is default parameter value. Due to the nature of JavaScript, all function
			parameters are essentially optional. If a function expects an argument, and you don't pass anything in, it's simply undefined.
		</p>
		
		<pre><code>
			function sayHello(name) {
				console.log('Hello', name);
			}

			sayHello(); // Hello undefined
		</code></pre>

		<p>
			As a result, it's usually a good idea to check that arguments have been set. If they haven't, you can either set them to some 
			sensible default, or throw an exception.
		</p>

		<pre><code>
			function sayHello(name) {
				name = name || 'world';
				console.log('Hello', name);
			}

			sayHello('Captain Janeway'); // Hello Captain Janeway
			sayHello(); // Hello world
		</code></pre>

		<p>
			Setting a bunch of default values can get a bit cumbersome, so modern JavaScript gives us a simpler way to do it.
		</p>

		<pre><code>
			function sayHellow(name = 'world') {
				console.log('Hello', name);
			}

			sayHello(); // Hello world
		</code></pre>

		<p>
			One small thing to remember - parameters with default values need to appear at the end of the argument list. Of course,
			this won't be that much of a problem, as we only write functions with one or two parameters, right?
		</p>

		<p>
			Also, your default values absolutely can refer to previous parameters.
		</p>

		<pre><code>
			function registerUser(name, preferredName = name) {
				createUser(name);
				printNameBadge(preferredName);
			}
		</code></pre>

		<h3>This binding & how arrow functions can help</h3>

		<p>
			The final part of modern JavaScript I wanted to talk about is arrow functions. By this point you've seen me using them all over the place.
			They provide a nice way to write callbacks inline - they're a little shorter to declare than normal functions, and a single line 
			arrow function has an implicit return, saving even more characters.
		</p>

		<pre><code>
			const evenNumbersNormalFunction = numbers.filter(function (number) {
				return number % 2 === 0;
			});

			const evenNumbersArrowFunction = numbers.filter(number => number % 2 === 0);
		</code></pre>

		<p>
			As you can see, the arrow function is shorter, and has a greater signal-to-noise ration. However, arrow functions are special for another 
			reason too. To understand this, we need to look at the <code>this</code> keyword in JavaScript.
		</p>

		<p>
			Understanding how <code>this</code> works can be one of the most challenging parts of learning JavaScript. The rules themselves aren't 
			super complicated, it's just that there are a lot of them. Often, you'll see people working around <code>this</code> by using code like 
		</p>

		<pre><code>
			const that = this;
		</code></pre>

		<p>
			While this hack works (and is used a lot), it's not really clean code. We're adding variables that don't add any meaning. And, in older code, 
			before the introduction of <code>const</code>, there was nothing stopping us from assigning <code>that</code> to something else. Today,
			there are plenty of ways to manage <code>this</code> without resorting to hacks, and I would see the code above as a pretty clear indicator 
			that the author didn't really get how <code>this</code> works.
		</p>

		<p>
			So how does <code>this</code> work? As a general rule, in JavaScript, <code>this</code> refers to the object that called the function.
			However, there are a few ways to override that. Also, it's important to remember that <code>this</code> refers to the object that 
			<i>called</i> the function, not the object that defined it.
		</p>

		<pre><code>
			const uhura = {
				givenName: 'Nyota',
				familyName: 'Uhura',
				sayHello: function () {
					console.log('hello', this.givenName, this.familyName);
				}
			};

			const scully = {
				givenName: 'Dana',
				familyName: 'Scully',
				sayHello: uhura.sayHello
			};

			uhura.sayHello(); // Hello Nyota Uhura
			scully.sayHello(); // Hello Dana Scully
		</code></pre>

		<p>
			You'll notice that even though <code>scully.sayHello</code> calls <code>uhura.sayHello</code>, <code>this</code> refers to 
			<code>scully</code>, <strong>not</strong> <code>uhura</code>. This can be confusing, especially if you've come from a language 
			that doesn't work this way, but it makes a lot of sense in a language that deals with event handlers.
		 </p>
		 
		 <pre><code>
			 const button = document.getElementById('special-button');
			 button.addEventListener('click', function () {
				 console.log(this); // button
			 });
		 </code></pre>

		<p>However, like I said, there are a bunch of ways to override this default behaviour.</p>
		<ol>
			<li>
				If the function is called from the global scope, <code>this</code> refers to the <code>window</code> object.
				<pre><code>
					const person = {
						name: 'Sarah Connor',
						sayHello: function () {
							console.log('Hello', this.name);
						}
					}

					const sayHello = person.sayHello;
					sayHello(); // Hello
				</code></pre>
			</li>
			<li>
				If the function is called from a strict global context, <code>this</code> is undefined. Any code written inside a module 
				is in strict mode, as is any code with a <code>'use strict';</code> declaration.

				<pre><code>
					const person = {
						name: 'Sarah Connor',
						sayHello: function () {
							'use strict';
							console.log('Hello', this.name);
						}
					}

					const sayHello = person.sayHello;
					sayHello(); // Uncaught TypeError: Cannot read property 'name' of undefined
				</code></pre>
			</li>
			<li>
				If the function is called via <code>call</code> or <code>apply</code>, then <code>this</code> refers to the first argument 
				of <code>call</code> or <code>apply</code>.

				<pre><code>
					const person = {
						name: 'Sarah Connor',
						sayHello: function () {
							console.log('Hello', this.name);
						}
					};

					const anotherPerson = {
						name: 'Katniss Everdeen'
					};

					person.sayHello.call(anotherPerson); // Hello Katniss Everdeen
				</code></pre>
			</li>
			<li>
				If the function was created via <code>bind</code>, then <code>this</code> refers to the first of argument of <code>bind</code>.
				This can't be overridden via <code>call</code> or <code>apply</code>

				<pre><code>
					const person = {
						name: 'Sarah Connor',
						sayHello: function () {
							console.log('Hello', this.name);
						}
					};

					const anotherPerson = {
						name: 'Katniss Everdeen'
					};

					const boundHello = person.sayHello.bind(anotherPerson);

					boundHello(); // Hello Katniss Everdeen 
					boundHello.call(person); // Hello Katniss Everdeen
				</code></pre>
			</li>
			<li>
				And finally, if the function is called with the <code>new</code> keyword, then <code>this</code> refers to a brand new object, 
				that will be returned by the function. This can't be overried by binding the function.
			</li>

			<pre><code>
				function Ship(name) {
					this.name = name;
				}

				const objectShip = Ship('Planet Express');
				console.log(objectShip.name); // Uncaught TypeError: Cannot read property 'name' of undefined

				const constructedShip = new Ship('Planet Express');
				console.log(constructedShip.name); // Planet Express

				const boundShip = Ship.bind({ name: 'Millenium Falcon' });
				const constructedBoundShip = new boundShip('Planet Express');
				console.log(constructedBoundShip.name); // Planet Express
			</code></pre>
		</ol>

		<p>
			All of this changes with arrow functions though. Arrow functions essentially don't bind <code>this</code>.
		</p>

		<pre><code>
			const uhura = {
				givenName: 'Nyota',
				familyName: 'Uhura',
				sayHello: () => {
					console.log('hello', this.givenName, this.familyName);
				}
			};

			uhura.sayHello(); // Hello undefined undefined
		</code></pre>

		<p>Instead, they'll use the <code>this</code> from the context that they're declared in.</p>

		<pre><code>
			class Person {
				constructor(name) {
					this.name = name;
					this.sayHello = () => console.log('Hello', this.name);
				}
			}

			const uhura = new Person('Uhura');
			uhura.sayHello(); // Hello Uhura
		</code></pre>

		<p>So how does <code>this</code>-binding in arrow functions behave in our exceptional circumstances?</p>
		<ol>
			<li>In global context, it works the same as in normal functions, in strict and non-strict mode.</li>
			<li>
				Calling an arrow function via <code>call</code> or <code>apply</code> has no effect. <code>this</code> will refer to the same 
				thing it would have referred to if you didn't use <code>call</code> or <code>apply</code>

				<pre><code>
					class Person {
						constructor(name) {
							this.name = name;
							this.sayHello = () => console.log('Hello', this.name);
						}
					}

					const uhura = new Person('Uhura');
					const katniss = { name: 'Katniss' };
					
					uhura.sayHello.call(katniss); // Hello Uhura
				</code></pre>
			</li>
			<li>
				Creating a function from an arrow function with <code>bind</code> also has no effect.
				<pre><code>
					class Person {
						constructor(name) {
							this.name = name;
							this.sayHello = () => console.log('Hello', this.name);
						}
					}

					const katniss = { name: 'Katniss' };
					const boundPerson = Person.bind(katniss);
					
					const uhura = new boundPerson('Uhura');
					uhura.sayHello.call(katniss); // Hello Uhura
				</code></pre>
			</li>
			<li>
				And finally, you can't use <code>new</code> on an arrow function.

				<pre><code>
					const Person = (name) => ({ name });
					const person = new Person('Uhura'); // Uncaught TypeError: Person is not a constructor
				</code></pre>
			</li>
		</ol>

	</section>
	
	<section><h2 class="incomplete" id="architecting-applications">Architecting applications</h2></section>
	<section><h2 class="incomplete" id="testing">Testing</h2></section>

	<section class="in-draft">
		<h2 id="semantic-html">Semantic HTML & accessibility</h2>

		<p>
			Semantic HTML refers to HTML that uses elements that have intrinsic meaning. For example, if you're creating something for a user 
			to click on, then you should use a <code>&lt;button&gt;</code>, rather than a <code>&lt;div&gt;</code>. It's often spoken about in 
			the context of accessibility, but it's important to remember that accessible code isn't just about making your code work with a 
			screen reader.
		</p>

		<ul>
			<li>
				Using semantic HTML adds meaning to your code, increasing the signal-to-noise ratio. It's far easier to understand as a developer.
			</li>
			<li>
				Web page users expect certain types of elements to behave in certain ways. If you use the correct semantic element, you
				get a lot of this behaviour for free. This means you don't have to write as much code, and you're less likely to introduce 
				bugs.
			</li>
			<li>
				You don't know what type of device a user is going to use to interact with your app. It could be a mouse and keyboard, or a touch-screen,
				or a less common device like a watch, a gaming controller, or a screen reader.  Using semantic HTML means your app follows 
				a standard that will help your app work correctly on all those devices - as well as a bunch that haven't been invented yet!
			</li>
		</ul>

		<aside>
			<h3>What about ARIA?</h3>

			<p>
				ARIA is a set of attributes that you can add to your HTML elements to provide hints to the browser for building the accessibility tree.
				The accessibility tree is used by screen readers to provide information to screen readers that sighted users can get visually.
			</p>
			
			<pre><code>
				&lt;label&gt;Please send me spam&lt;label&gt;
				&lt;input type="checkbox" aria-label="please send me spam"&gt;
			</code></pre>

			<p>
				A screen reader encountering the above <code>&lt;input&gt;</code> element will read out that it has a label of <code>please send me spam</code>.
			</p>

			<p>
				The thing about ARIA though, is that it's actually quite difficult to get right. And the majority of the time, you can accomplish the 
				same thing just using plain HTML. For example,
			</p>

			<pre><code>
				&lt;label for="spam"&gt;Please send me spam&lt;label&gt;
				&lt;input id="spam" type="checkbox"&gt;
			</code></pre>

			<p>
				achieves the exact same thing, from the screen reader's point of view. It also has the added bonus of linking the <code>&lt;label&gt;</code>
				to the <code>&lt;input&gt;</code> without needing to maintain two versions of the label text.
			</p>

			<p>
				Furthermore, ARIA doesn't add the functionality that you get from using semantic HTML. An HTML <code>&lt;button&gt;</code> element can be 
				tabbed to, and activated via pressing the enter key or space bar. Adding <code>role="button"</code> to a <code>&lt;div&gt;</code> does not 
				bestow these abilities on it. Similarly, in the first example above (the one using <code>aria-label</code>), the user must click on the 
				<code>&lt;input&gt;</code> element to change the value of the checkbox. In the second example, the user can click on the <code>&lt;label&gt;</code>
				element as well, greatly increasing the clickable area, and improving usability.
			</p>

			<p>
				Generally speaking, compared to using semantic HTML, using ARIA is far more difficult, and provides benefits to far fewer of your users.
			</p>

			<p>
				Now, that doesn't mean you're never going to need ARIA. Sometimes there are just things that work well for sighted users that aren't going 
				to work well with a screen reader. For example, if you update part of a page after a screen-reader user as already read it, then you 
				need a way to notify the user of the change. ARIA is perfect for this.
			</p>

			<p>
				Just remember that ARIA <i>is</i> important - but it shouldn't be the first tool that you reach for when building accessible apps.
			</p>			
		</aside>

		<p>So what does a semantic HTML look like?</p>

		<h3>Landmarks & descriptions</h3>

		<p>
			Each page should contain some landmarks. These are especially helpful to screen-reader users, but a page designed with these landmarks 
			in mind will also be easier for other users to navigate, especially in situations where you can't rely on CSS, like in Reader mode.
			Landmark HTML elements include heading tags (<code>&lt;h1&gt; - &lt;h6&gt;</code>), <code>&lt;header&gt;</code>, <code>&lt;footer&gt;</code>,
			<code>&lt;nav&gt;</code>, <code>&lt;main&gt;</code>, and <code>&lt;aside&gt;</code> elements.
		</p>

		<p>
			Not every page is going to have all of these features, but if your page has any of them, then you should use the appropriate element.
			This fits with the clean coding principles we were discussing earlier - communicate your intent by using meaningful names.
		</p>

		<p>
			If you're building a SPA with multiple logical pages, then you should give each page a distinct title via the 
			<code>&lt;title&gt;</code> element. For example, on Twitter, the feed page has the title <code>Latest Tweets / Twitter</code>, while the 
			notifications page is <code>Notifications / Twitter</code>. These titles help screen reader users know when they've navigated to a new 
			page, but they also help sighted users distinguish between browser tabs, as the <code>&lt;title&gt;</code> element is used as the tab 
			title. The title should include the specific page name, followed by your app name. (Put the app name last. The tab title is likely to be 
			truncated, but sighted users can use the favicon to distinguish between apps.)
		</p>

		<p>
			As well as having some landmarks, we should make sure we have appropriate descriptions for our elements. This is most relevant for 
			<code>&lt;input&gt;</code> elements (where we're asking the user to do something), and images (which not be available, due to network
			conditions, or device restrictions, or might not be visible, due to the user's vision, or lighting, or screen glare).
		</p>

		<p>
			Every <code>input</code> element should have an obvious label that remains visible while the user is interacting with the element.
			This means that placeholder text that disappears when the input has focus is not enough. Disappearing labels can be particularly 
			difficult for users with cognitive difficulties, but they also make life harder for users who are using your app while distracted 
			by something else. If you are particularly enamoured of inline labels, try something like Google's Material Design labels, which 
			start inline, but move above the input once you start typing.
		</p>

		<style>
			#md-label-example {
				position: relative;
				padding: 20px 0;
			}
			#md-label-example label {
				left: 5px;
				top: 25px;
				position: absolute;
				font-size: 16px;
				transition: all .5s;
				font-weight: bold;
			}
			#md-label-example input:focus + label {
				top: -5px;
				left: 0;
				font-size: 18px;
			}
		</style>

		<div id="md-label-example">
			<input id="md-name">
			<label for="md-name">Name</label>
		</div>

		<p>
			Ideally, you should use a <code>&lt;label&gt;</code> element to label your <code>&lt;input&gt;</code> element. The <code>&lt;input&gt;</code>
			should be a child of the <code>&lt;label&gt;</code> <i>or</i> they should be linked via <code>for</code> and <code>id</code> attributes.
		</p>

		<pre><code>
			&lt;label&gt;
				&lt;input type="checkbox"&gt; Yes! Please send me spam!
			&lt;label&gt;

			&lt;label for="favourite-book"&gt;What is your favourite book?&lt;label&gt;
			&lt;input type="text" id="favourite-book"&gt;
		</code></pre>

		<p>
			Linking labels and inputs like this means that a click on the <code>&lt;label&gt;</code> is treated like a click on the 
			<code>&lt;input&gt;</code>. For checkboxes and radiobuttons, this means the item will be selected just by clicking the label. 
			This increases the clickable area, which is particularly helpful on small screens. It also provides us with opportunities to style 
			our radiobuttons and checkboxes in an accessible way, as we can add the styling to the label.
		</p>

		<style>
			#power-button {
				--diameter: 40px;
				width: var(--diameter);
				height: var(--diameter);
				border: 4px solid;
				border-radius: 50%;
				position: relative;
				border-color: grey;
				margin-left: .7em;
				transition: all .5s;
			}

			#power-button::before {
				--background: #333;
				content: '';
				height: 20px;
				border: 2px solid;
				border-color: inherit;
				position: absolute;
				transform: translate(-50%);
				left: 50%;
				top: -25%;
				box-shadow: 
					3px 3px var(--background),
					-3px 3px var(--background),
					3px -3px var(--background),
					-3px -3px var(--background);
				transition: all .5s;
			}

			#styled-checkbox {
				opacity: 0;
				position: fixed;
			}
			#styled-checkbox + label {
				display: flex;
				background-color: #333;
				color: #ddd;
				align-items: center;
				font-size: 30px;
				font-family: sans-serif;
				padding: 20px;
				cursor: pointer;
				border: 1px solid #aaa;
				border-radius: 8px;
				width: max-content;
				margin: auto;
				box-shadow: 
					inset 1px 1px 2px 1px #ccc,
					inset -1px -1px #888,
					1px 1px 3px 1px hsla(0, 0%, 20%, .3);
				transition: all .5s;
			}

			#styled-checkbox:checked + label {
				box-shadow: none;
			}

			#styled-checkbox:checked + label #power-button {
				border-color: greenyellow;
				border-width: 5px;
				filter: drop-shadow(0 0 10px rgba(64, 245, 47, 0.377));
			}
		</style>
		<input type="checkbox" id="styled-checkbox">
		<label for="styled-checkbox">Power <div id="power-button"></div></label>

		<p>
			Images are the other types of element that are super important to describe. The rules for describing them are a bit more complicated 
			though. First of all, <strong>all</strong> <code>&lt;img&gt;</code> elements should have an <code>alt</code> attribute. Sometimes this 
			attribute will be empty, but it's still important to include it. Otherwise, screen readers will read out the filename. 
		</p>

		<p>
			If your image is illustrating a point, or providing information, then it needs a description. That description can be in the 
			text of your page. If there is no descriptive text on the page, then you need to provide a description in the <code>alt</code>
			attribute. This isnt just for accessibility either - it also helps with search engine optimisation.
		</p>

		<div class="example">
			<p>As seen in the image below, giraffes must bend down awkwardly to drink.</p>
			<img src="images/giraffe-drinking.jpg" alt="">
			<p>Horses, on the other hand, don't have that problem</p>
			<img src="images/horse-drinking.jpg" alt="horse drinking from beer glass by picking the glass up in its teeth">
		</div>

		<pre><code>
			...
			&lt;img src="images/giraffe-drinking.jpg" alt=""&gt;
			...
			&lt;img src="images/horse-drinking.jpg" alt="horse drinking from beer glass by picking the glass up in its teeth"&gt;
		</code></pre>

		<p>
			(<a href="https://www.flickr.com/photos/tambako/47572147022">Giraffe drinking from the pond</a> 
			flickr photo by <a href="https://www.flickr.com/photos/tambako/">Tambako The Jaguar</a> 
			shared under a <a href="https://creativecommons.org/licenses/by-nd/2.0/">Creative Commons (BY-ND) license</a>.)
		</p>
		
		<p>
			Make sure your description describes what the picture is about <i>in the context that it's being used in</i>. In our horse example above,
			the important part is that the horse isn't bending down to drink - it's picking up the glass in its teeth. If this picture appeared in 
			a bunch of pictures from a party, it might have been important to mention that it was a horse drinking beer (as opposed to a human drinking beer).
		</p>

		<p>
			As well as being descriptive, your <code>alt</code> text also needs to be succinct (which can seem like a tall order!). Screen readers will only 
			read out 125 characters, so make sure you don't waste any! Especially make sure that you don't start your descriptions with "image of" or 
			"picture showing". The screen reader will announce that it's an image, and a search engine bot will know from the image tag. Adding this 
			information to the <code>alt</code> text is repetitive and boring.
		</p>

		<p>
			On the other hand, if your image is purely decorative, it doesn't need a description.
		</p>

		<div class="example">
			<p>And that's all I have to say on that topic.</p>
			<img style="width: 30vw; margin: auto" src="images/divider.svg" alt="">
			<p>But on this kind of related topic, I have a bunch more things to say.</p>
		</div>

		<pre><code class="html">
			&lt;img src="images/divider.svg" alt=""&gt;
		</code></pre>

		<p>
			(It would be even better to add this divider as a background image of an <code>hr</code> element.)
		</p>

		<p>
			Icons are a kind of special case that kind of crosses the line between informative and descriptive.
			While icons <i>can</i> convey meaning, you usually shouldn't rely on them by themselves. Instead, icons should 
			be accompanied by descriptive text, that is visible to all users. The reason for this is that icons are not 
			really very good at adding meaning. They usually rely on a picture of a physical object to convey an abstract 
			concept. And, they're often so highly stylised, that it's not obvious what it's actually a picture <i>of</i>,
			unless you already know.
		</p>

		<figure>
			<img src="images/save-icon.png" alt="A tweet in Japanese, with a picture of the Excel save icon, which looks like a floppy disk">
			<figcaption>The Japanese reads "Why is the Excel save icon a vending machine?"</figcaption>
		</figure>

		<p>
			I'd recommend that you treat icons like acronyms in writing - only use them if you've already defined what they mean.
			In writing, this means that you should provide the expanded version of the acronym the first time you use it - AF (as foretold).
			Unfortunately, in an app, there's no real way to know where a user is going to encounter your icon first. So, best practice is 
			to include text with them everywhere.
		</p>

		<figure>
			<img src="images/icons-with-labels.png" alt="icon buttons with text labels">
			<figcaption>Icons from <a href="https://css-tricks.com/">CSS Tricks website</a></figcaption>
		</figure>

		<p>
			Sometimes though, it's not going to be practical to add the text. In these cases, you'll need to use your best judgement.
			It's more ok to leave off the labels when space is extremely limited, or you're dealing with expert users. So, if you're 
			building a game, with limited space for controls, and users who are going to invest time in learning the controls, and 
			who play frequently enough to remember them, you can go to town with icon-only buttons. A banking app, which users are 
			only going to interact with a few times a month - not so much.
		</p>

		<p>
			Finally, sometimes there is information that is conveyed visually, that doesn't have a good text equivalent. For example, if you 
			have an asterisk indicating some conditions. For these situations, ARIA provides the <code>aria-describedby</code> and 
			<code>aria-labelledby</code> attributes. <code>aria-describedby</code> allows you to provide a text label for an element, similar 
			to how the <code>alt</code> attribute works on an image. <code>aria-labelledby</code> allows you to provide the ID of an 
			element provides a label for the current element. It's similar to how the <code>for</code> attribute links a label to an 
			input, except the link is created from the labelled element's side.
		</p>

		<p>
			For more information on the topic (including some pratical exercises) check out <a href="https://webaim.org/techniques/alttext/">
			WebAIM page on Alternative Text</a>
		</p>

		<h3>Navigation</h3>

		<p>
			Accessibility isn't just about semantic HTML though. You also need to think about how users navigate around your app. 
			Most apps are designed with a user using a computer with a mouse in mind. Designs for mobile phones and tablets are 
			tacked on as an afterthought (or not at all). However, more people are actually using phones and tablets than 
			desktop to laptop computers.
		</p>

		<figure>
			<img 
				src="images/StatCounter-comparison-ww-monthly-201812-201912.png"
				alt="Graph of usage over the last 12 months. Mobile increases: 49%-53%. 
				Desktop drops: 47%-44%. Tablet stays around 3%">
			<figcaption>Source: https://gs.statcounter.com/platform-market-share/desktop-mobile-tablet</figcaption>
		</figure>

		<p>
			As you can see, mobile usage accounted for almost 10% more users than desktop usage in December last year, and the gap is 
			widening. And tablets account for a very small percentage of users. These figures are for the entire world though - if we 
			restrict ourselves to data from Australian users, then the picture is a little different, but not significantly.
		</p>

		<figure>
			<img
				src="images/StatCounter-comparison-AU-monthly-201812-201912.png"
				alt="Graph of ussage in the Australian market. Mobile increases: 38%-47%. Desktop drops: 52%-45%. Tablet drops: 10%-7%.">
			<figcaption>Source: https://gs.statcounter.com/platform-market-share/desktop-mobile-tablet/australia</figcaption>
		</figure>

		<p>
			While desktop usage is a bit higher in Australia, it's still dropping. And tablet usage is also much higher than the global 
			average. Combining mobile and tablet usage, touchscreen devices still account for around 10% more of the market than 
			traditional computers.
		</p>

		<p>
			On top of this, there is an unknown number of users employing non-standard input devices, such as accessibility devices, 
			game controllers, or even watches.
		</p>

		<figure>
			<img src="images/Accessible gaming controller.jpg" alt="accesible gaming control pad">
			<figcaption>Accessible gaming control pad. Source: https://mediaaccess.org.au/latest_news/gaming-is-growing-more-accessible-0</figcaption>
		</figure>

		<p>
			The good news is that most non-standard devices function like keyboards. So if you can get your site working for touchscreens and 
			keyboards, you should be OK for the vast majority of people. (Honestly, I wouldn't even bother too much with mouse users, as an
			app which works for keyboards and touchscreens will work with a mouse. Maybe just add some hover states.)
		</p>

		<p>So what are the things you should keep in mind when designing for keyboard and touchscreen users?</p>

		<p>For keyboard users</p>
		<ul>
			<li>
				<p>You need some kind of indicator of which element currently has focus. The browser will basically give you this one for free.</p>
				
				<figure>
					<img src="images/focus-indicators.png" alt="default focus indicator in Safari, Chrome, and Firefox">
					<figcaption>Default focus indicator in Safari, Chrome, and Firefox</figcaption>
				</figure>

				<p>
					The HTML standard recommends just using the browser default indicators, but I find there are a couple of problems with this 
					advice. For a start, most designers don't like them - they appear differently on different browsers, and they don't match 
					with the site's default. They're also completely inaccessible if your site happens to use background colours that are similar 
					to the focus indicator colour (and the colour changes between different versions of the same browser, and even between 
					different input types in the same version of the same browser).
				</p>

				<p>
					The good news is that you can fairly easily replace the default indicators with your own. You can use an outline, like the 
					browsers do, or change the border or colour of the element. Just make sure you're not relying solely on changing the hue 
					of the colour, as this won't be visible to colour-blind users. For inputs, I find adding a thicker border usually works 
					well. For links, my usual go-to is a dashed outline the current colour.
				</p>

				<pre><code class="css">
						/* New focus style will replace the default style in Chrome and Safari */
						.link:focus {
							outline: 1px dashed currentColor;
							outline-offset: 2px;
						}
						/* You need to remove the Firefox focus indicator manually */
						.link:-moz-focusring {
							outline: none;
						}
				</code></pre>

				<p>
					<code>currentColor</code> is a CSS variable that references the <code>color</code> attribute of the current element.
				</p>

				<style>
					#focus-indicator-demo {
						display: flex;
					}
					#focus-indicator-demo a {
						outline: 1px dashed currentColor;
						outline-offset: 3px;
						font-size: 36px;
						margin-right: 1em;
					}
					#focus-indicator-demo a:nth-child(2) {
						color: hsl(12, 80%, 40%);
					}
					#focus-indicator-demo a:nth-child(3) {
						background-image: linear-gradient(yellow, fuchsia);
						-webkit-background-clip: text;
						-webkit-text-fill-color: transparent;
					}
				</style>

				<div id="focus-indicator-demo" aria-describedby="demonstration of focus styles using a 1px dashed currentColor outline">
					<a href="https://css-tricks.com/">CSS Tricks</a>
					<a href="https://css-tricks.com/">CSS Tricks</a>
					<a href="https://css-tricks.com/">CSS Tricks</a>
				</div>
			</li>
			<li>
				<p>
					Pressing <kbd>tab</kbd> should take the user to the next <code>&lt;a&gt;</code>, <code>&lt;input&gt;</code>, or 
					<code>&lt;button&gt;</code> element. If you use semantic HTML, this will Just Work. Don't force other elements to be 
					tabbable by adding a <code>tabindex</code>, and don't remove elements from the tab order by setting <code>tabindex="-1"</code>.
					Don't be tempted to add <code>tabindex</code> to things that you think screen reader users might want to tab to - screen readers 
					have a different way of navigating that doesn't rely on tabbing.
				</p>

				<p>
					The one exception to this is if you're building a custom control. Sometimes you need to group elements in a way that requires 
					manual tab-indexing. You should give your control <code>tabindex="0"</code>, so the browser can insert it into the tab order 
					automatically. You should <strong>never</strong> add a <code>tabindex</code> other than 0 or -1. This will cause the 
					tab navigation to go in weird and unexpected ways, and generally cause unhappiness.
				</p>
			</li>
			<li>
				<p>
					If you have a multi-page SPA (which, yes, sounds like an oxymoron) you need to move the focus back to the top of the page 
					manually when the user navigates to a new route. Otherwise, the next tab will just continue on from where you were. And, given that
					the rest of that particular page no longer exists, that's probably going to be the footer.
				</p>
				<p>
					My recommendation would be to have an <code>&lt;h1&gt;</code> element at the start of each page. (I mean this is just good design, 
					but is also helpful here). Give your <code>&lt;h1&gt;</code> a <code>tabindex</code> of -1, so it can be focussed with JavaScript, 
					but can't actually be tabbed to. Then, have some kind of interceptor that moves the focus to the <code>&lt;h1&gt;</code> whenever
					the route changes.

					<pre><code class="html">
						&lt;h1 tabindex="-1"&gt;Notifications&lt;/h1&gt;
					</code></pre>

					<pre><code>
						// On route change
						const heading = document.querySelector('h1');
						heading.focus();
					</code></pre>
				</p>
			</li>
			<li>
				When using modals, you need to move the focus to the modal when it opens. Then you need to ensure that focus is trapped inside the
				modal. As long as the modal is open, the user shouldn't be able to tab to anything outside of it. If they tab to the last item in 
				the modal, then the next tab should take them back to the first item. (And don't forget your modal needs to be closeable via keyboard,
				preferably via a close button (which is tabbable), or by hitting <kbd>esc</kbd>) <div class="needs-example">an example modal if you can 
					be fucked
				</div>
			</li>
		</ul>

		<p>And what about touchscreen users?</p>
		<ul>
			<li>
				Make sure you're not relying solely on hover actions. You can have hover states on your buttons to indicate they are clickable, 
				just make sure they have focus states as well. And if you have tooltips or menus that open on hover, make sure they open on click 
				as well. (In fact, I would suggest using only click, and ditching open on hover. Hover can be difficult for people with motor 
				difficulties or in awkward situations, which includes people with disabilities, the elderly, people on buses, 
				people sitting on the couch, people using Lenovo laptops with those awful nipple trackpoints...)
			</li>
			<li>
				Make sure you're not assuming whether or not someone is using a touchscreen based on their screen size. Devices with large screens 
				can have touch interfaces (2-in-1 laptops, touch-based whiteboards, etc), and some small devices don't have touch-screens 
				(watches, portable gaming devices, e-readers). If you must, you can detect whether a device has "hover capability" via 
				the <code>hover</code> media query. It's not supported in IE, but I don't think it's going to matter that much if your IE 
				users just get the non-hover version of your site.
			</li>
			<li>
				A person's finger is much less precise than a mouse cursor. Make sure that your touch targets are large enough. The Apple Human 
				Interface Guide suggests a minimum of 44px by 44px. Google's Android guide recommends 48px by 48px. Some people who actually 
				conducted a <a href="https://dl.acm.org/doi/10.1145/1152215.1152260">study into touch target sizes</a>, recommend a minimum size 
				of 1cm squared. This is a bit hard to specify in CSS though.
			</li>
		</ul>

		<h3>Standards</h3>

		<p>
			Finally, the web has been around for over 30 years now. There are well-established conventions for interacting with pages.
			If you use semantic HTML, you will follow these conventions automatically, and users will learn how to use your app far more 
			quickly. And they'll probably enjoy it more. Some examples of these things are:
		</p>

		<ul>
			<li>
				If you use an <code>&lt;a&gt;</code> element for links, the cursor will automatically change to a hand, and the link destination 
				will appear in the browser status bar on hover. The user can open the link in a new tab by ctrl-clicking, or using the context 
				menu. Pressing <kbd>enter</kbd> while the link is focussed will activate it. (Furthermore, pressing <kbd>space</kbd> will
				 <i>not</i> open the link. This behaviour is not preserved if you use a <code>&lt;button&gt;</code> for your link.)
			</li>
			<li>
				If you use a <code>&lt;button&gt;</code> element, the <code>onclick</code> handler will be fired if the user presses <kbd>enter</kbd> or 
				<kbd>space</kbd> while the button has focus, so it's automatically usable by a keyboard user.
			</li>
			<li>
				When an element inside a <code>&lt;form&gt;</code> element has focus, pressing <kbd>enter</kbd> or <kbd>space</kbd> will 
				submit the form.
			</li>
			<li>
				As mentioned previously, a click on a <code>&lt;label&gt;</code> element is treated as a click on the linked <code>&lt;input&gt;</code>
				element.
			</li>
		</ul>

		<p>
			When writing HTML, it is important to remember to choose your HTML element based on the <i>functionality</i> of the element, not its 
			appearance. For example, for some reason, designers really like styling links as buttons (and vice versa). I'm sure they have their 
			reasons, and that's fine. Let them have at it. You, however, should still use <code>&lt;a&gt;</code> elements for links, and just 
			CSS the heck out of them. HTML describes what our app does. CSS describes how it looks.
		</p>

		<p>
			And finally, I hope this has convinced you that accessibility isn't something that you just tack on at the end. Building an 
			accessible app is almost as much about clean code as it is about user experience. And the user experience isn't just about catering 
			to screen reader users - it's about making your app work for <i>everyone</i>. And, most importantly, building an accessible page 
			doesn't have to be time-consuming or expensive. Using semantic HTML is actually <i>quicker</i> than adding functionality manually.
		</p>

		<p>
			And, I mean, sure, the above guidelines aren't going to get you a AAA certified page. But it <i>will</i> get you a page that is 
			significantly more accessible than most pages out there. This means your users are going to have a better time, you're going to have 
			more users able to use your site, and you're much less likely to get sued by someone who can't use your site ;-)
		</p>
	</section>

	<section class="in-draft">
		<h2 id="understanding-css">Understanding CSS</h2>

		<p>
			Out of CSS, HTML, and JavaScript, I think CSS is the thing people struggle with most. If you're looking for 
			work as a frontend developer, strong JavaScript skills are important, but mastery of CSS and HTML is what 
			will make you really stand out.
		</p>

		<p>
			Part of the reason that CSS is so difficult is that it's a completely different paradigm to most programming 
			languages. While knowing C++ or Java will give you a huge leg-up with learning JavaScript, it won't help at 
			all with learning CSS.
		</p>

		<p>
			Another factor is the fact that CSS seems to lack underlying principles. Learning CSS often feels like just 
			memorising property names and allowed values, then learning a bunch of tricks to achieve what you want. This 
			makes learning CSS very time consuming, but also very tedious.
		</p>

		<p>
			Luckily, modern CSS is much more systematic than earlier versions. Rather than just adding new features willy-nilly, 
			modern CSS has underlying models that are shared between different properties. This makes learning new CSS 
			features much quicker and easier.
		</p>

		<p>
			So today, rather than just explaining how to achieve various effects with CSS, we're going to have a look 
			under the covers at the principles and models that make CSS work.
		</p>

		<h3>The box model</h3>

		<p>
			In CSS, everything is a box. Boxes are rectangular. They have a width and a height. Boxes are divided into 
			four areas:
		</p>
		<ul>
			<li>The content goes in the innermost part of the box</li>
			<li>The content is surrounded by padding</li>
			<li>The border goes around the content and padding</li>
			<li>
				The box is surrounded by the margin. The margin isn't technically part of the box - it's the space around
				it. The margin isn't counted in the width or height, and backgrounds don't cover any of the margin.
			</li>
		</ul>

		<img src="images/box-model.png" alt="dev tools diagram of box model">

		<p>
			A box also has a <code>box-sizing</code>, which determines how the width and height are calculated. The allowed values 
			are <code>border-box</code> and <code>content-box</code>.
		</p>

		<dl>
			<dt><code>border-box</code></dt>
			<dd>
				The width and height refer to the total size of the box, including the border and padding
				<p class="needs-example">picture of border-box sizing</p>
			</dd>
			<dt><code>content-box</code></dt>
			<dd>
				The width and height refer to the size of the <i>content</i>. The padding and border are added on top of this.
				<p class="needs-example">picture of content-box sizing</p>
			</dd>
		</dl>

		<p>
			By default, all elements have <code>box-sizing: content-box</code>. Except in IE, which uses <code>box-sizing: border-box</code>,
			because of course it does. Because of this, it's a good idea to set the box-sizing manually on any project you're working on.
			What might be surprising is that most people actually follow IE's example and use <code>box-sizing: border-box</code>. You usually 
			care about the total size of an element, regardless of how much padding it has, and <code>border-box</code> makes the 
			calculations a bit easier. You can override the browser's default box-sizing with the following bit of code.
		</p>

		<pre><code>
			*, *::before, *::after {
				box-sizing: border-box;
			}
		</code></pre>

		<p>
			Overriding the browser's default styling like this is called a CSS reset. Resets like this are commonly used to ensure defaults
			are consistent across browsers. The selectors used are as generic as possible, so that you can easily override them in your 
			application if you need to. You can write your own CSS resets, or you can just grab one someone else has created. To see the 
			kind of thing that normally goes in them, check out <a href="https://dev.to/hankchizljaw/a-modern-css-reset-6p3">Andy Bell's 
			CSS reset</a> on dev.to.
		</p>


		<h3>Normal flow</h3>

		<p>
			In CSS, individual elements are placed on the page according to normal flow. Each element is placed immediately adjacent to 
			its previous sibling (respecting margins) in one of the two directions - inline, or block.
		</p>

		<p>
			The inline direction is the direction that you write words in a sentence. On a page written in English, the inline direction 
			is left to right, across the page. On an Arabic page, it's right to left. On a Japanese page, it's top to bottom, down the page.
		</p>

		<p>
			The block direction is the direction that you add paragraphs to the page. On a page written in English or Arabic, it's top 
			to bottom, down the page. In Japanese, it's right-to-left, across the page.
		</p>

		<p>
			Why do we use the terms inline and block, rather than just saying across and down? Because we want CSS to be as language-agnostic 
			as possible. It's not actually that good at it currently - just ask anyone who's ever tried to internationalise a page to a
			non-left-to-right language. But we are moving towards a more language-agnostic CSS, and it's good to get the hang of these things 
			sooner rather than later.
		</p>

		<p>
			So how do we know if an element should be added in the inline direction, or the block direction? Each element has a <code>display</code>
			property of either <code>block</code> or <code>inline</code>. (Technically, there are a few more <code>display</code> properties, as 
			we'll see shortly. But they can all be thought of as a type of <code>block</code>, or a type of <code>inline</code>). Elements with 
			<code>display: inline</code> are added in the inline direction. Elements with <code>display: block</code> are added in the block 
			direction. <code>span</code> is your default inline element, with no other semantics. <code>div</code> is your default block element.
			(But this can be overridden in CSS.)
		</p>

		<div class="example add-block-inline">
			<button onclick="addElement('inline-block')">Add inline element</button>
			<button onclick="addElement('block')">Add block element</button>
			<div id="block-inline-demo" style="border: 1px solid black"></div>
		</div>

		<style>
			.add-block-inline .element {
				width: 100px;
				height: 100px;
			}
		</style>

		<script>
			const blockInlineContainer = document.getElementById('block-inline-demo');
			function addElement(display) {
				const div = document.createElement('div');
				div.style.display = display;
				div.classList.add('element');
				blockInlineContainer.appendChild(div);
			}
		</script>

		<h3>Block layout</h3>

		<p>
			The display property controls more than just how the element is placed on the page though. Block and inline elements have 
			other distinct properties and behaviours. Block elements are a little easier to understand conceptually though, so let's 
			start with them.
		</p>

		<p>
			As we already discussed, block elements are added in the block direction. Each block element is on a row by itself - 
			the next element will be placed below the block element, whether it is block or inline.
		</p>

		<p>
			The size of a block element is determined by its width and height (plus the padding and border, if you're still using 
			<code>content-sizing</code>, despite everything we just discussed). If the width of the element is <code>auto</code>
			(which is the default value), then the element will be as wide as its parent element. If the height is <code>auto</code>,
			then the element will be as tall as it needs to be to fit all its content, given the current width.
		</p>

		<div class="example">
			<p>Type in the box below to add content</p>
			<div class="element" id="block-auto" contenteditable="true" style="width: 100%">
				some example content
			</div>
			<fieldset>
				<legend>Element width</legend>
				<input type="radio" name="block-width" id="block-width-auto" onchange="selectWidth('100%')" selected><label for="block-width-auto">auto</label>
				<input type="radio" name="block-width" id="block-width-100px" onchange="selectWidth('200px')"><label for="block-width-auto">200px</label>
			</fieldset>
		</div>

		<script>
			const blockWidthElement = document.getElementById('block-auto');
			function selectWidth(width) {
				blockWidthElement.style.width = width;
			}
		</script>


		<p>
			If you give your element a width and height that is too small to fit the contents, then it'll overflow, and probably look 
			terrible. This overflowed contents won't affect the placement of the next element though - it'll just get covered up.
		</p>

		<div class="example overflow-demo">
			<div id="overflow-demo" class="element" contenteditable="true">
				Type here to add content
			</div>
			<div class="element">
				some content that fits
			</div>
			<button onclick="clearContent()">Clear content</button>
		</div>

		<style>
			.example.overflow-demo .element {
				width: 120px;
				height: 120px;
			}
		</style>

		<script>
			const overflowDemoElement = document.getElementById('overflow-demo');
			function clearContent() {
				overflowDemoElement.textContent = '';
			}
		</script>

		<p>
			One small gotcha with block layout is margin-collapse. In some situations, the margins of two adjacent block
			elements will overlap, resulting in a single margin that is the same size as the larger one. This is due to HTML's 
			origins as a document delivery system - author's didn't want to end up with double margins around headings, or the 
			last paragraph on a page. It also means that an empty element will disappear completely, rather than hanging 
			around as a margin-ghost.
		</p>

		<p>
			If you think you've been affected by margin-collapse, or you just want to know more about it, check out 
			<a href="https://www.smashingmagazine.com/2019/07/margins-in-css/">Rachel Andrew's article on CSS margins</a>.
		</p>

		<h3>Inline layout</h3>

		<p>
			Inline layout is a bit more complicated than block layout. Inline elements behave like text - they are laid out side-by-side 
			in the inline direction, until they get to the end of the line, and then they wrap to the next line.
		</p>

		<p>
			In order to layout inline elements (and text), the browser creates a line box. The line box is a container that the 
			browser uses to place elements - it doesn't appear in the DOM, and it can't be styled. It's kind of like adding pencil 
			lines that are erased later. Inline elements (and text) are placed in the line box, until the next element won't fit. 
			Then the browser creates a new linebox, directly below the previous one, and adds the remaining elements to the new line box.
		</p>

		<p>
			The width of the line box is the width of the parent element's content box. (In vertical languages, this will actually be the 
			height. I'm just going to assume a horizontal language here though, because, honestly, this stuff is already confusing enough.)
			The height of the line box is determined by the current font - it depends on both the font-size, and some of the font's internal 
			metrics. If there are multiple fonts in the one line box, it's up to the browser to decide what height to use, but it'll probably 
			pick one based on the tallest font.
		</p>

		<div class="example linebox">
			<button onclick="addToLinebox()">Add an inline element</button>
			<p>The shaded area between the grey lines represents the line box.</p>
			<div class="container" id="linebox"></div>
		</div>

		<style>
			.example.linebox .container {
				--linebox: hsla(254, 30%, 50%, .2);
				--line-width: 2px;
				--total-height: 105px;
				padding: 20px;
				min-height: 140px;
				background-image: repeating-linear-gradient(grey, grey var(--line-width), 
																										var(--linebox) var(--line-width), var(--linebox) calc(var(--total-height) - var(--line-width)), 
																										grey calc(var(--total-height) - var(--line-width)), grey var(--total-height));
			  background-clip: content-box;
  			background-origin: content-box;
			}
			.example.linebox .element, .example.line-height .element {
				display: inline-block;
				width: 100px;
				height: 100px;
			}
		</style>

		<script>
			const lineboxContainer = document.getElementById('linebox');
			function addToLinebox() {
				const element = document.createElement('span');
				element.classList.add('element');
				lineboxContainer.appendChild(element);
			}
		</script>


		<p>
			If you need to, you can set the height of the line box yourself, using the <code>line-height</code> property. If you set the 
			<code>line-height</code> of a block element, it will set the minimum height of all line boxes inside that element.
		</p>

		<div class="example line-height">
			<label for="line-height">Line-height:</label><input type="number" id="line-height" onchange="updateLineHeight()" value="1.2" step="0.1">
			<div class="container">
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
				<span class="element"></span>
			</div>
		</div>

		<style>
			.example.line-height {
				width: 420px;
			}
		</style>

		<script>
			const lineHeightContainer = document.querySelector('.example.line-height .container');
			const lineHeightInput = document.getElementById('line-height');
			lineHeightInput.value = 1.2;
			function updateLineHeight() {
				lineHeightContainer.style.lineHeight = lineHeightInput.value;
			}
		</script>
		
		<p>
			If you set it on an inline element, then that height will be used in the line box height calculation, along with all the 
			fonts and stuff. In the example below, you can see that changing the line-height for one of the elements doesn't change the 
			height of any elements, but it changes the spacing between the lines. However, it only affects the spacing of the line 
			boxes which actually contain that element. (Getting even line spacing with different fonts in CSS is surprisingly difficult).
		</p>

		<div class="example inline">
			<label for="words-height">Line-height for the medium font</label>
			<input type="number" id="words-height" onchange="updateWordsLineHeight()" step="0.1" value="1.2">
			<span class="words">
				<span style="font-size: 10px">some words in a small font</span>
				<span style="font-size: 20px; color:hsl(12, 80%, 40%)">some words in a medium font</span>
				<span style="font-size: 30px">some words in a large font</span>
			</span>
		</div>

		<style>
			.example.inline, .example.inline-padding {
				width: 200px;
			}
			.words {
				border: 1px solid blue;
			}
		</style>

		<script>
			const wordsHeightElement = document.getElementById('words-height');
			wordsHeightElement.value = 1.2;
			const mediumElement = document.querySelector('.words :nth-child(2)');
			function updateWordsLineHeight() {
				mediumElement.style.lineHeight = wordsHeightElement.value;
			}
		</script>
			
		<p>
			You should use a unit-less value for <code>line-height</code>, so that it scales properly if the font size changes.
		</p>

		<p>
			The width and height of an inline element are determined by the content of the element. You can't set them manually. You can,
			however, add padding and margins. Paddings and margins in the inline direction will add space around the element, as you would 
			expect. Paddings in the block direction will actually add space around the element, but if it makes the element taller than the 
			line box, it will overflow. As a result, you won't be able to see the padding, unless you add a border or a background colour.
			Margins in the block direction have no effect.
		</p>

		<div class="example inline-padding">
			<label for="inline-padding">Padding</label>
			<input type="number" id="inline-padding" onchange="adjustPadding()">
			<label for="inline-margin">Margin</label>
			<input type="number" id="inline-margin" onchange="adjustMargin()">
			<div class="container">
				normal text normal text <span id="inline-padding-demo">adjust my margin and padding!</span>
				normal text normal text normal text
			</div>
		</div>

		<style>
			#inline-padding-demo {
				outline: 2px dashed currentColor;
			}
		</style>

		<script>
			const paddingElement = document.getElementById('inline-padding');
			const marginElement = document.getElementById('inline-margin');
			const inlinePaddingElement = document.getElementById('inline-padding-demo');

			function adjustPadding() {
				inlinePaddingElement.style.padding = `${paddingElement.value}px`;
			}
			function adjustMargin() {
				inlinePaddingElement.style.margin = `${marginElement.value}px`;
			}
		</script>

		<p>
			If the line box is a different size than the height of your element, you can control whether your element is aligned to the top, 
			middle, or bottom of the line box using the <code>vertical-align</code> property. (And yes, it's called <code>vertical-align</code>
			even in situations where it's controlling the horizontal alignment. I told you CSS wasn't quite there yet with internationalisation.)
			The <code>vertical-align</code> property is only going to have an effect on inline elements, in a line box that isn't the same size 
			as their own height. This is why it never actually does what anyone wants it to when they're trying to centre-align things.
		</p>

		<div class="example vertical-align">
			<label for="vertical-align">vertical-align</label>
			<select id="vertical-align" onchange="updateVerticalAlign()">
				<option value="top">top</option>
				<option value="middle">middle</option>
				<option value="bottom">bottom</option>
			</select>
			<div class="container">
				<span class="large-text">LARGE TEXT</span>
				<span class="small-text">small text</span>
				<span class="large-text">LARGE TEXT</span>
			</div>
		</div>

		<style>
			.example.vertical-align .large-text {
				font-size: 40px;
			}
			.example.vertical-align .small-text {
				font-size: 15px;
			}
		</style>

		<script>
			const verticalAlignElement = document.querySelector('.example.vertical-align .small-text');
			const verticalAlignSelect = document.getElementById('vertical-align');
			verticalAlignSelect.value = 'top';
			verticalAlignElement.style.verticalAlign = 'top';
			function updateVerticalAlign() {
				console.log(this.value)
				verticalAlignElement.style.verticalAlign = verticalAlignSelect.value;
			}
		</script>

		<h3>New display values</h3>

		<p>
			Now, you might have noticed that there are some disadvantages to the inline/block system. It conflates the sizing with the 
			layout. What if you want elements to sit side-by-side in the inline direction, but you <i>also</i> want to control their size?
		</p>

		<p>
			<code>display: inline-block</code> was introduced to deal with this situation. An inline-block element is laid out like an 
			inline element, but can be sized like a block element. 
		</p>

		<p>
			Over time, other <code>display</code> properties were added too. <code>table</code> lays out an element like a table, 
			<code>flex</code> gives us a flexible one-dimensional layout, and <code>grid</code> gives a flexible two-dimensional layout.
			Of course, it's possible you might want any of these to exist in an inline context, so we also have <code>inline-table</code>,
			<code>inline-flex</code>, and <code>inline-grid</code>.
		</p>

		<p>
			At some point, someone realised that it was kind of silly to define two new display properties any time we wanted to add new 
			display functionality. It makes a lot more sense just to treat how the element is laid out and how it behaves internally as 
			two different things. So now, the <code>display</code> property can take <i>two</i> values - the outer display value, and 
			the inner display value.
		</p>

		<p>
			The outer value determines how the element itself is placed in the flow. The inner value determines how the element's children 
			are laid out. So <code>display: block</code> is now <code>display: block flow</code>. <code>display: inline-flex</code> would be 
			<code>display: inline flex</code>
		</p>

		<p>
			No browsers actually support the new two-value syntax yet, so don't go using it. However, it is a good model of how they 
			implement the existing values, so I think it's a good thing to understand.
		</p>

		<h3 class="incomplete">CSS is recursive</h3>

		<p>something about how children are laid out inside their parents</p>

		<h3 class="incomplete">CSS in three dimensions</h3>

		<p>
			Ok, so now we understand how an individual element behaves, and how elements are laid out in two dimensions. But CSS actually 
			allows us to lay things out in <i>three</i> dimensions.
		</p>

		<h3 class="incomplete">CSS selectors & specificity</h3>

	</section>
	
	<section class="in-draft">
		<h2 id="css-layouts">CSS layouts</h2>

		<p>
			Everything we've just talked about allows you to do some pretty nifty stuff. But there are some serious limitations to the 
			normal flow. Elements can really only be positioned relative to their parent, or their immediately previous sibling.
			There's no way to co-ordinate the layout of several elements at once.
		</p>

		<p>
			In the early days of CSS (and even before CSS was invented), we got around this by using <code>table</code> elements.
			More recently, we've moved to 12-column CSS layout tools, like Bootstrap's grid. Both of these have some serious disadvantages 
			though. Tables are not even a bit semantic, and require you to add <i>a heap</i> of extra HTML. They're also not responsive 
			(beyond being able to specify column widths in percentages). Bootstrap requires you to add a bit less extra HTML, and it 
			adds the ability to adjust the layout based on screen size. You're still limited to percentage widths though, you can only 
			change the layout based on the viewport size (not based on the size of the parent container), and it only supports layouts 
			at five different viewport sizes.
		</p>

		<p>
			But don't stress - modern CSS now gives us a bunch of different options for controlling layouts. These options are pure CSS 
			(you don't need to add extra HTML), and they are completely responsive.
		</p>

		<p>
			One thing we should note before we start though. These new layout properties do not give you complete control over how your 
			page is laid out. Instead, it gives you a way to communicate some guidelines to the browser, and the browser will work out 
			the best layout, based on your requirements. This, in fact, is how all CSS works - it was never intended for specifying pixel-perfect 
			layouts. Which makes a lot of sense - you have no way of knowing what kind of device your page is going to be displayed on, and 
			it would be very tedious to try and specify every possible layout. Your time writing CSS is going to be a lot happier if you 
			remember that the web is a dynamic medium, and that CSS is specifically designed to support that dynamicism.
		</p>

		<h3><code>display: flex</code></h3>

		<p>
			<code>display: flex</code> creates a flexible, one-dimensional layout. Setting <code>display: flex</code> on an element 
			creates a flexbox inside that element. A flexbox is kind of like a line box, but with super powers.
		</p>

		<p>
			You can control the direction that your flexbox runs using the <code>flex-direction</code> property. There are four possible 
			values.
		</p>
		<dl>
			<dt><code>row</code></dt>
			<dd>Items will be placed in the inline direction. So, if our page is in English, left to right, across the page.</dd>
			<dt><code>row-reverse</code></dt>
			<dd>
				Items will be placed along the inline axis, but in the opposite direction to the way text goes.
				On our hypothetical English-speaking page, that would be right to left, across the page.
			</dd>
			<dt><code>column</code></dt>
			<dd>Items will be placed in the block direction. So on our page, from top to bottom, down the page.</dd>
			<dt><code>column-reverse</code></dt>
			<dd>
				Items will be placed along the block axis, but in the opposite direction to the way the text goes.
				On our page, that's bottom to top, up the page.
			</dd>
		</dl>

		<p>
			Why do we use <code>row</code> and <code>column</code> instead of <code>block</code> and <code>inline</code>?
			I have no idea. I suspect it's because the spec was written before the serious efforts at standardising CSS properties 
			began.
		</p>

		<p>
			By default, the browser will try to fit all your items into a single flex box. (We'll go into how it does this in a bit).
			If you would prefer it to wrap (like a line box), then you can set <code>flex-wrap: wrap</code>.
		</p>

		<div class="example flex-wrap">
			<label for="flex-wrap-direction">flex direction</label>
			<select id="flex-wrap-direction" onchange="updateFlexWrapDirection()">
				<option value="row">row</option>
				<option value="row-reverse">row-reverse</option>
				<option value="column">column</option>
				<option value="column-reverse">column-reverse</option>
			</select>
			<input type="checkbox" id="flex-wrap" onchange="updateFlexWrap()">
			<label for="flex-wrap">wrap</label>
			<div class="container">
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
			</div>
		</div>

		<style>
			.example.flex-wrap .container {
				display: flex;
				width: 500px;
				max-height: 500px;
				align-items: center;
			}
			.example.example.flex-wrap .element {
				flex-basis: 100px;
				height: 100px;
				width: 100px;
			}
		</style>

		<script>
			const flexWrapContainer = document.querySelector('.example.flex-wrap .container');
			const flexWrapSelect = document.getElementById('flex-wrap-direction');
			flexWrapSelect.value = 'row';
			const flexWrapCheckbox = document.getElementById('flex-wrap');
			flexWrapCheckbox.checked = false;
			function updateFlexWrapDirection() {
				flexWrapContainer.style.flexDirection = flexWrapSelect.value;
			}
			function updateFlexWrap() {
				const wrap = flexWrapCheckbox.checked;
				flexWrapContainer.style.flexWrap = wrap ? 'wrap' : 'nowrap';
			}
		</script>

		<p>
			Unlike line boxes, flexbox height is easy to calculate. If all your flex items are in a single line, then the height of the flexbox 
			is the height of the flex container (the element that has <code>display: flex</code> on it). If your items are wrapped over several 
			lines, then you can control the height of the lines using the <code>align-content</code> property.
		</p>

		<p>
			By default, the lines will be evenly spaced across the entire container.
		</p>

		<div class="example flex default-align-content">
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
		</div>

		<style>
			.flex {
				display: flex;
			}
			.example.default-align-content {
				flex-wrap: wrap;
				width: 350px;
				height: 450px;
			}
			.flex .element {
				width: 100px;
				height: 100px;
			}
		</style>

		<p>You've got a few options to change this though</p>

		<table class="align-content-values">
			<thead>
				<th>Value</th><th>Effect</th><th>Diagram</th>
			</thead>
			<tbody>
				<tr>
					<td>flex-start/start</td>
					<td>Items will be placed towards the start of the container</td>
					<td>
						<div class="example" style="align-content: start">
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td>flex-end/end</td>
					<td>Items will be placed towards the end of the container</td>
					<td>
						<div class="example" style="align-content: end">
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td>center</td>
					<td>Items will be placed in the centre of the container</td>
					<td>
						<div class="example" style="align-content: center">
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td>space-between</td>
					<td>
						The first line will be at the start of the container, the last line will be at the end of the container.
						The remaining lines will be spaced between them.
					</td>
					<td>
						<div class="example" style="align-content: space-between">
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td>space-around</td>
					<td>
						Lines are spaced evenly in the container. The space between the container and the first line, and the container and 
						the last line, is half of the space between adjacent lines.
					</td>
					<td>
						<div class="example" style="align-content: space-around">
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td>space-evenly</td>
					<td>
						Lines are spaced evenly in the container. The space between the container and the first line, and the container and
						the last line, is the same as the space between adjacent lines.
					</td>
					<td>
						<div class="example" style="align-content: space-evenly">
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td>stetch</td>
					<td>
						If none of the elements have a height specified, then all the lines will 
						be of equal height, stretched to fill up the available space. If any elements 
						have a height specified, then those elements will have their given height, and 
						the remaining space will be spread out equally between all lines, including the 
						ones that already have some height. This can lead to some unpredictable 
						behaviour (try adding heights to the example via dev tools).
					</td>
					<td>
						<div class="example stretch" style="align-content: stretch">
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
							<div class="element"></div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>

		<style>
			.align-content-values .example {
				display: flex;
				flex-wrap: wrap;
				border-style: dashed;
				width: 115px;
				height: 115px;
			}
			.align-content-values .element {
				width: 30px;
				height: 30px;
				border-width: 1px;
				border-radius: 3px;
			}
			.align-content-values .stretch .element {
				height: auto;
			}
		</style>

		<p>
			<code>start</code> and <code>end</code> are new values, intended to replace <code>flex-start</code> and <code>flex-end</code>,
			to give us a more flexible way of defining alignment and justification (ie so we can use them in grid too!). They're currently 
			only supported by Firefox.
		</p>

		<p>
			<code>stretch</code> isn't supported in IE and some versions of Edge.
		</p>

		<p>
			Check <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/align-content">the MDN article on <code>align-content</code></a>
			for up-to-date browser compatiblity data.
		</p>

		<p class="needs-example">would be good to add controls so diagrams can switch to different row/column, ltr/rtl etc</p>

		<p>
			Just like we can use <code>vertical-align</code> to place an item relative to a line box, we can use <code>align-self</code> to
			place an item relative to the flex-box. By default, <code>align-self</code> is <code>stretch</code>, which means the item 
			will stretch to fill the height (or width) of the entire flexbox. You can also set it to <code>flex-start/start</code>, 
			<code>flex-end/end</code>, or <code>center</code>.
		</p>

		<div class="example align-self">
			<label for="align-self">align-self</label>
			<select id="align-self" onchange="changeAlignSelf()">
				<option value="stretch">stretch</option>
				<option value="flex-start">flex-start</option>
				<option value="flex-end">flex-end</option>
				<option value="center">center</option>
			</select>
			<div class="container flex">
				<div class="element"></div>
				<div class="element highlight"></div>
				<div class="element"></div>	
			</div>
		</div>

		<style>
			.example.align-self .element {
				margin-right: 10px;
			}
			.example.align-self .highlight {
				width: auto;
				height: auto;
			}
			.example.align-self .highlight::before {
				content: '';
				display: block;
				width: 50px;
				height: 50px;
			}
		</style>

		<script>
			const alignSelfSelect = document.getElementById('align-self');
			alignSelfSelect.value = 'stretch';
			const alignSelfElement = document.querySelector('.example.align-self .highlight');
			function changeAlignSelf() {
				alignSelfElement.style.alignSelf = alignSelfSelect.value;
			}
		</script>

		<p>
			And if you don't want to set the alignment on every item individually, you can use <code>align-items</code> on the flex container 
			to align all the children at once.
		</p>

		<div class="example align-items">
			<label for="align-items">align-items</label>
			<select id="align-items" onchange="changeAlignItems()">
				<option value="stretch">stretch</option>
				<option value="flex-start">flex-start</option>
				<option value="flex-end">flex-end</option>
				<option value="center">center</option>
			</select>
			<div class="container flex">
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>	
			</div>
		</div>

		<style>
			.example.align-items .container {
				height: 100px;
			}
			.example.align-items .element {
				margin-right: 10px;
				width: auto;
				height: auto;
			}
			.example.align-items .element::before {
				content: '';
				display: block;
				width: 50px;
				height: 50px;
			}
		</style>

		<script>
			const alignItemsSelect = document.getElementById('align-items');
			alignItemsSelect.value = 'stretch';
			const alignItemsElement = document.querySelector('.example.align-items .container');
			function changeAlignItems() {
				alignItemsElement.style.alignItems = alignItemsSelect.value;
			}
		</script>

		<p>
			We can also control how the flex items are laid out in the inline direction, just like we controlled how the flexboxes were laid 
			out in the block direction. We can do this via the <code>justify-content</code> property. <code>justify-content</code> takes 
			the same values as <code>align-content</code>, and has similar browser support.
		</p>

		<div class="example justify-content">
			<label for="justify-content">justify-content</label>
			<select id="justify-content" onchange="changeJustifyContent()">
				<option value="flex-start">flex-start</option>
				<option value="flex-end">flex-end</option>
				<option value="center">center</option>
				<option value="space-between">space-between</option>
				<option value="space-around">space-around</option>
				<option value="space-evenly">space-evenly</option>
			</select>
			<div class="container flex">
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>	
			</div>
		</div>

		<style>
			.example.align-items .container {
				height: 100px;
				width: 100%;
			}
			.example.align-items .element {
				width: 100px;
				height: 100px;
			}
		</style>

		<script>
			const justifyContentSelect = document.getElementById('justify-content');
			justifyContentSelect.value = 'flex-start';
			const justifyContentElement = document.querySelector('.example.justify-content .container');
			function changeJustifyContent() {
				justifyContentElement.style.justifyContent = justifyContentSelect.value;
			}
		</script>

		<p>
			Are all these align and justify properties confusing? Yes. Do I have a good way of remembering them, other than just practice? 
			Not really. You can try to remember that "justify" is like justifying text, and goes in the same direction. And "align" is like 
			<code>vertical-align</code>? I guess? I can't help you with "content" and "items", except to say that "x-items" can be overridden 
			by "x-self", because it refers to the items individually. "x-content" refers to the items as a whole, so a single one can't be set
			differently. <code>flex</code> lacks a <code>justify-items/justify-self</code>, because it only operates in one dimension. 
			If you find yourself needing to do that, then you should think about using <code>grid</code> code.
		</p>

		<p>
			And, if you want to practice using these properties, I recommend checking out <a href="https://flexboxfroggy.com/">
			Flexbox Froggy</a> - it's a cute game where you use <code>flex</code> properties to position frogs on lilypads. 
		</p>

		<p>
			So far, we've looked at positioning things with <code>flex</code>. However, the real magic of <code>flex</code> comes from how 
			items within a flexbox are sized. And I'm not going to lie, it involves a bit of browser voodoo.
		</p>

		<p>
			First up, let's have a look at height in the cross-axis direction. The cross-axis direction means the direction perpendicular to 
			the flow of text. If we're working with a row going across the page, then we're talking about the height. If we're working with 
			a column going down the page, then we're talking about the width. For the sake of simplicity, let's assume it's a row, and we're 
			talking about height. 
		</p>

		<p class="needs-example">diagram of main vs cross axis</p>

		<p>
			Luckily, this one isn't <i>too</i> complicated. If you've set a height on your element, then that's the height it will be.
			Otherwise, the height will be whatever it needs to be to fit the content, given the width. Just remember, if you've not 
			set <code>align-items</code>, or <code>align-self</code>, then those properties will default to a value of <code>stretch</code>,
			and fill the entire height of the container.
		</p>

		<div class="example flex vertical-sizing" style="height: 250px">
			<div class="element" style="height: 200px;">
				This element has a height of 200px;
			</div>
			<div class="element" style="align-self: center">
				This element has small content and <code>align-self: center</code>
			</div>
			<div class="element" style="align-self: center">
				This element has lots and lots and lots and lots and lots and lots of content and <code>align-self: center</code>
			</div>
			<div class="element">
				This element has small content and <code>align-self</code> unset
			</div>
		</div>

		<style>
			.example.vertical-sizing .element {
				width: 200px;
				height: auto;
			}
		</style>

		<p>
			If your item contains dynamic content (ie, you don't know how big it needs to be in advance), then I recommend setting 
			the alignment to whatever you like, and letting the browser work out the height. I promise it will do a good job.
		</p>

		<p>
			If your item is an image, then I also recommend setting the alignment. Otherwise, the default alignment of <code>stretch</code>
			is going to completely trash the aspect ratio.
		</p>

		<div class="example flex borked-ratio">
			<div>
				Pikachu are a species of Pokmon, fictional creatures that appear in an assortment of video games, animated television shows and movies, trading card games, and comic books licensed by The Pokmon Company, a Japanese corporation. They are yellow rodent-like creatures with powerful electrical abilities.
			</div>
			<img src="images/pikachu.png" alt="pikachu">
			<div>
				Celebi is a Pokmon species in Nintendo and Game Freak's Pokmon franchise and one of the Mythical Pokmon. Created by Ken Sugimori, it first appeared in the video games Pokmon Gold and Silver and later appeared in various merchandise, spinoff titles, and animated and printed adaptations of the franchise.
			</div>
			<img src="images/celebi.jpeg" alt="celebi">
			<div>
				Eevee is a Pokmon species in Nintendo and Game Freak's Pokmon franchise. Created by Ken Sugimori, it first appeared in the video games Pokmon Red and Blue. It has later appeared in various merchandise, spinoff titles, and animated and printed adaptations of the franchise.
			</div>
			<img src="images/eevee.jpeg" alt="eevee">
		</div>

		<style>
			.example.borked-ratio div {
				width: 200px;
			}
		</style>

		<p>
			This is easily corrected by adding <code>align-self: center</code> to the images.
		</p>

		<div class="example flex fixed-ratio">
			<div>
				Pikachu are a species of Pokmon, fictional creatures that appear in an assortment of video games, animated television shows and movies, trading card games, and comic books licensed by The Pokmon Company, a Japanese corporation. They are yellow rodent-like creatures with powerful electrical abilities.
			</div>
			<img src="images/pikachu.png" alt="pikachu">
			<div>
				Celebi is a Pokmon species in Nintendo and Game Freak's Pokmon franchise and one of the Mythical Pokmon. Created by Ken Sugimori, it first appeared in the video games Pokmon Gold and Silver and later appeared in various merchandise, spinoff titles, and animated and printed adaptations of the franchise.
			</div>
			<img src="images/celebi.jpeg" alt="celebi">
			<div>
				Eevee is a Pokmon species in Nintendo and Game Freak's Pokmon franchise. Created by Ken Sugimori, it first appeared in the video games Pokmon Red and Blue. It has later appeared in various merchandise, spinoff titles, and animated and printed adaptations of the franchise.
			</div>
			<img src="images/eevee.jpeg" alt="eevee">
		</div>

		<style>
			.example.fixed-ratio div {
				width: 200px;
			}
			.example.fixed-ratio img {
				align-self: center;
			}
		</style>

		<p>
			The size along the main axis is a lot more complicated to work out, but you also have more control over what happens. So I guess 
			it balances out? Assuming we're still working on a horizontal row, this is going to be the width of the elements.
		</p>

		<p>
			It starts out simple though. If you set a width on your element, it will be that width.
		</p>

		<div class="example set-width">
			<label for="set-width">width</label>
			<input type="number" id="set-width" onchange="updateSetWidth()">px
			<div class="container flex">
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
			</div>
		</div>

		<style>
			.set-width .container {
				justify-content: space-evenly;
			}
		</style>

		<script>
			const setWidthInput = document.getElementById('set-width');
			setWidthInput.value = '200';
			const setWidthElements = document.querySelectorAll('.example.set-width .element');
			function updateSetWidth() {
				const width = `${setWidthInput.value}px`;
				setWidthElements.forEach(element => element.style.width = width);
			}
			updateSetWidth();
		</script>

		<p>
			If you don't set a width, each element will be the biggest possible size that just fits all its content. So, if you have an element 
			that only contains text, all of the text will appear on a single line. This width is referred to as the <code>max-content</code>
			width. You can actually use <code>max-content</code> as a value for width on any element to make it behave in this way. It won't 
			work in IE, or some versions of Edge though. Check out the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/width">
			MDN docs on width</a> for more details.
		</p>

		<p>You can type in the elements to add or remove content</p>
		<div class="example flex max-content">
			<div class="element" contenteditable="true">small content</div>
			<div class="element" contenteditable="true">lots and lots and lots of content</div>
			<div class="element" contenteditable="true"></div>
			<div class="element" contenteditable="true">a bit of content</div>
		</div>

		<style>
			.max-content .element {
				width: auto;
			}
		</style>

		<p>
			If you don't have <code>flex-wrap: wrap</code>, and there's not enough space for all your elements, then they will shrink to 
			fit the available space. All the elements will shrink by the same amount, with a few exceptions.
		</p>
		<ul>
			<li>If an element has a <code>min-width</code> set, it won't shrink smaller than the <code>min-width</code></li>
			<li>
				No element will shrink smaller than its <code>min-content</code> width. The <code>min-content</code> width refers to the 
				smallest width that will allow the element to fit its content. If the element only contains text, then the <code>min-content</code>
				width will be the width of the longest word. If it contains other elements, then the <code>min-content</code> width will be 
				the larger of the largest element and the longest word. You can use <code>min-content</code> as a width value, just like 
				<code>max-content</code>
			</li>
		</ul>

		<div class="example flex resize shrink-widths>
			<div class="element" style="width: 200px">width: 200px</div>
			<div class="element" style="min-width: 200px">min-width: 100px;</div>
			<div class="element" contenteditable="true">Type here to change the content</div>
		</div>

		<style>
			.resize {
				overflow: hidden;
				resize: horizontal;
			}
			.example.shrink-widths .element {
				height: auto;
			}
		</style>

		<p>
			In the previous example, you might have noticed that if you made the container too small, the bits that didn't fit got cut off.
			This isn't actually the default behaviour - I had to set <code>overflow: hidden</code> so that I could make the container 
			resizable (via <code>resize: horizontal</code>). The real default behaviour is for the content to overflow (and usually look rubbish).
		</p>

		<div class="example flex flex-overflow">
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
		</div>

		<style>
			.example.flex-overflow {
				width: 400px;
				padding: 5px;
			}
			.example.flex-overflow .element {
				min-width: 150px;
				height: 100px;
			}
		</style>

		<p>
			If, on the other hand, you <i>do</i> have <code>flex-wrap: wrap</code>, your items will wrap rather than shrinking.
		</p>

		<div class="example flex resize flex-overflow-wrap">
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
		</div>

		<style>
			.example.flex-overflow-wrap {
				flex-wrap: wrap;
			}
			.example.flex-overflow-wrap .element {
				min-width: 150px;
				height: 100px;
			}
		</style>

		<p>
			Flex elements also support the <code>flex-basis</code> property. <code>flex-basis</code> is the size of the element along the main axis.
			If we're working in a row, it's the width. If we're working in a column, it's the height. If <code>flex-basis</code> isn't set, it 
			will fallback to the width/height value. If it is set, it will override the width/height value. Other than that, it works just like 
			the <code>width</code> and <code>height</code> properties. I would recomment preferring <code>flex-basis</code> over <code>width</code>
			or <code>height</code>, because that's what's used in the <code>flex</code> shortcut that we're going to see shortly, but in most 
			cases it isn't really going to make a difference.
		</p>

		<p>
			By default, all elements will shrink by the same amount. You can change that if you want though!
		</p>
		<ul>
			<li>If you don't want an element to shrink at all, you can set <code>flex-shrink: 0</code></li>
			<li>If you want an element with a width to shrink, you can set <code>flex-shrink: 1</code></li>
			<li>
				If you want elements to shrink at a different rate, you can set <code>flex-shrink</code> to another number.
				An element with <code>flex-shrink: 2</code> will shrink twice as fast as the default. An element with 
				<code>flex-shrink: .5</code> will shrink half as fast. You can set <code>flex-shrink</code> to any 
				non-negative number.
			</li>
		</ul>

		<div class="example flex resize flex-shrink">
			<div class="element">
				<label for="flex-shrink-0">flex-shrink:</label>
				<input id="flex-shrink-0" type="number" min="0" step="1" value="0">
			</div>
			<div class="element">
				<label for="flex-shrink-1">flex-shrink:</label>
				<input id="flex-shrink-1" type="number" min="0" step="1" value="1">
			</div>
			<div class="element">
				<label for="flex-shrink-2">flex-shrink:</label>
				<input id="flex-shrink-2" type="number" min="0" step="1" value="2">
			</div>
			<div class="element">
				<label for="flex-shrink-3">flex-shrink:</label>
				<input id="flex-shrink-3" type="number" min="0" step="1" value="3">
			</div>
		</div>

		<style>
			.example.flex-shrink {
				width: 100%;
			}
			.example.flex-shrink .element {
				width: 400px;
			}
			.example.flex-shrink .element:first-child {
				flex-shrink: 0;
			}
			.example.flex-shrink .element:nth-child(2) {
				flex-shrink: 1;
			}
			.example.flex-shrink .element:nth-child(3) {
				flex-shrink: 2;
			}
			.example.flex-shrink .element:nth-child(4) {
				flex-shrink: 3;
			}
		</style>

		<script>
			document.querySelectorAll('.example.flex-shrink .element input').forEach((input) => input.addEventListener('change', function () {
				this.parentElement.style.flexShrink = this.value;
			}));
		</script>

		<p>(Try making the container smaller than the elements, and then changing the <code>flex-shrink</code> values.)</p>

		<p>
			Remember, <code>flex-shrink</code> controls <i>the rate at which an element shrinks</i>, not its final size. The final 
			size is going to depend on the starting size, the shrink-rate, and the min-content size. And if you don't want them to 
			shrink all the way down to their min-content size, you can set a <code>min-width</code>.
		</p>

		<p>
			You can also make elements grow to take up the available space. If you've got <code>flex-wrap: wrap</code>, elements will 
			grow to fill up all lines. They won't necessarily grow by the same amount in each line though - it will depend on the 
			amount of free space in each line. To allow an element to grow, set <code>flex-grow</code> to a non-negative number.
		</p>

		<div class="example flex multi-line-grow">
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
		</div>

		<style>
			.example.multi-line-grow {
				flex-wrap: wrap;
				width: 400px;
			}
			.example.multi-line-grow .element {
				flex-grow: 1;
			}
		</style>

		<p>
			<code>flex-grow</code> works like <code>flex-shrink</code> (but in the opposite direction). It controls the <i>rate at 
				which the element grows</i>. You can use <code>max-width</code> to stop an element growing beyond a certain size.
		</p>

		<p>
			The browser is going to place as many elements as fit into a single flex box.
		</p>

		<div class="needs-example">inital placement of elements</div>

		<p>Then, it's going to add up the flex-grow values of all the elements in the box.</p>

		<div class="needs-example">adding up flex grow</div>

		<p>It'll take the amount of empty space in the flex box, and divide it by the total of the flex-grow values.</p>

		<div class="needs-example">amount per element</div>

		<p>
			Then it will give each element some extra space. This amount of space will be equal to the number we just calculated, times
			the flex-grow for that element. 
		</p>

		<div class="needs-example">distributing the space</div>

		<p>
			Remember, the initial widths are determined by the <code>width</code> or <code>flex-basis</code> property, or the content.
			And no element will grow beyond its <code>max-width</code>.
		</p>

		<div class="example flex-grow">
			<input type="radio" id="flex-grow-wrap" name="flex-grow-wrap" onchange="updateFlexGrowWrap(true)" checked>
			<label for="flex-grow-wrap">flex-wrap: wrap</label>
			<input type="radio" id="flex-grow-nowrap" name="flex-grow-wrap" onchange="updateFlexGrowWrap(false)">
			<label for="flex-grow-nowrap">flex-wrap: nowrap</label>

			<div class="container resize flex">
				<div class="element">
					<label for="flex-grow-0">flex-grow:</label>
					<input id="flex-grow-0" type="number" min="0" step="1" value="0">
					<label for="flex-basis-0">flex-basis:</label>
					<input id="flex-basis-0" type="number" min="0" step="1" value="200">px
					<div contenteditable="true">add content</div>
				</div>
				<div class="element">
					<label for="flex-grow-1">flex-grow:</label>
					<input id="flex-grow-1" type="number" min="0" step="1" value="0">
					<label for="flex-basis-1">flex-basis:</label>
					<input id="flex-basis-1" type="number" min="0" step="1" value="200">px
					<div contenteditable="true">add content</div>
				</div>
				<div class="element">
					<label for="flex-grow-2">flex-grow:</label>
					<input id="flex-grow-2" type="number" min="0" step="1" value="0">
					<label for="flex-basis-2">flex-basis:</label>
					<input id="flex-basis-2" type="number" min="0" step="1" value="200">px
					<div contenteditable="true">add content</div>
				</div>
				<div class="element">
					<label for="flex-grow-3">flex-grow:</label>
					<input id="flex-grow-3" type="number" min="0" step="1" value="0">
					<label for="flex-basis-3">flex-basis:</label>
					<input id="flex-basis-3" type="number" min="0" step="1" value="200">px
					<div contenteditable="true">add content</div>
				</div>
				<div class="element">
					<label for="flex-grow-4">flex-grow:</label>
					<input id="flex-grow-4" type="number" min="0" step="1" value="0">
					<label for="flex-basis-4">flex-basis:</label>
					<input id="flex-basis-4" type="number" min="0" step="1" value="200">px
					<div contenteditable="true">add content</div>
				</div>
			</div>
		</div>

		<style>
			.example.flex-grow .container {
				width: 100%;
			}
			.example.flex-grow .element {
				flex-basis: 200px;
				flex-grow: 0;
				height: auto;
			}
		</style>

		<script>
			const flexGrowContainer = document.querySelector('.example.flex-grow .container');
			flexGrowContainer.style.flexWrap = 'wrap';
			function updateFlexGrowWrap(value) {
				flexGrowContainer.style.flexWrap = value ? 'wrap' : 'nowrap';
			}

			document.querySelectorAll('.example.flex-grow input[id^=flex-grow]').forEach((input) => {
				input.value = 0;
				input.addEventListener('change', function () {
					this.parentElement.style.flexGrow = this.value;
				});
			});

			document.querySelectorAll('.example.flex-grow input[id^=flex-basis]').forEach((input) => {
				input.value = 200;
				input.addEventListener('change', function () {
					this.parentElement.style.flexBasis = `${this.value}px`;
				});
			});
		</script>

		<p>
			It's common to want to set all of <code>flex-grow</code>, <code>flex-shrink</code>, and <code>flex-basis</code> on an element.
			Good news: there's a shortcut for that! <code>flex: grow shrink basis</code>. The default value is <code>0 1 0</code>, and both 
			of the second two values are optional. (You can set just <code>flex-grow</code> and <code>flex-basis</code>, but you need to use 
			a unit on the <code>flex-basis</code> value, else it will be interpreted as <code>flex-shrink</code>!)
		</p>

		<p>
			The final bit of magic that flex can do is change the order that elements appear in. As we already mentioned, you can set 
			<code>flex-direction</code> to <code>row-reverse</code> or <code>column-reverse</code> to invert the order of the line.
			You can also set <code>flex-wrap</code> to <code>wrap-reverse</code> to reverse the wrapping order. (So in a
			<code>flex-direction: row</code> situation, <code>flex-wrap: wrap-reverse</code> would cause the second row to appear 
			<i>above</i> the first one.)
		</p>

		<p>
			You can also control the placement of individual elements, by setting the <code>order</code>. Elements will appear in 
			order corresponding to their <code>order</code> value. <code>order</code> can be any integer value, and the default 
			is <code>0</code>. So an element with <code>order: -1</code>, will appear first in its line. An element with 
			<code>order: 1</code> will appear last (assuming no other <code>order</code>s have been set).
		</p>

		<div class="example reordering">
			<label for="order-flex-direction">flex-direction</label>
			<select name="flex-direction" id="order-flex-direction">
				<option value="row">row</option>
				<option value="row-reverse">row-reverse</option>
				<option value="column">column</option>
				<option value="column-reverse">column-reverse</option>
			</select>

			<label for="order-flex-wrap">flex-wrap</label>
			<select name="flex-wrap" id="order-flex-wrap">
				<option value="nowrap">nowrap</option>
				<option value="wrap">wrap</option>
				<option value="wrap-reverse">wrap-reverse</option>
			</select>

			<div class="container flex">
				<div class="element">
					<span>Element 1</span>
					<label for="order-element-1">order:</label>
					<input type="number" step="1" id="order-element-1">
				</div>
				<div class="element">
					<span>Element 2</span>
					<label for="order-element-2">order:</label>
					<input type="number" step="1" id="order-element-2">
				</div>
				<div class="element">
					<span>Element 3</span>
					<label for="order-element-3">order:</label>
					<input type="number" step="1" id="order-element-3">
				</div>
				<div class="element">
					<span>Element 4</span>
					<label for="order-element-4">order:</label>
					<input type="number" step="1" id="order-element-4">
				</div>
				<div class="element">
					<span>Element 5</span>
					<label for="order-element-5">order:</label>
					<input type="number" step="1" id="order-element-5">
				</div>
				<div class="element">
					<span>Element 6</span>
					<label for="order-element-6">order:</label>
					<input type="number" step="1" id="order-element-6">
				</div>
				<div class="element">
					<span>Element 7</span>
					<label for="order-element-7">order:</label>
					<input type="number" step="1" id="order-element-7">
				</div>
				<div class="element">
					<span>Element 8</span>
					<label for="order-element-8">order:</label>
					<input type="number" step="1" id="order-element-8">
				</div>
			</div>
		</div>

		<style>
			.example.reordering .container {
				max-height: 400px;
			}	
		</style>

		<script>
			const orderContainer = document.querySelector('.example.reordering .container');

			const orderDirectionSelect = document.getElementById('order-flex-direction');
			orderDirectionSelect.addEventListener('change', () => {
				orderContainer.style.flexDirection = orderDirectionSelect.value;
			});
			orderDirectionSelect.value = 'row';

			const orderWrapSelect = document.getElementById('order-flex-wrap');
			orderWrapSelect.addEventListener('change', () => {
				orderContainer.style.flexWrap = orderWrapSelect.value;
			});
			orderWrapSelect.value = 'nowrap';

			document.querySelectorAll('.example.reordering .element input').forEach((input) => {
				input.value = 0;
				input.addEventListener('change', function () {
					this.parentElement.style.order = this.value;
				});
			});
		</script>

		<p>
			One word of warning though - when you change the display order like this, the document order remains the same. A screen reader 
			will read the elements in document order, and the tab order will follow the document order. This can lead to a confusing 
			experience for users. As such, I suggest your treat this order-changing properties with extreme caution.
		</p>

		<p>
			Finally, the question I'm sure is burning everyone's lips: how well supported is <code>display: flex</code>? The answer is 
			"very well". All the flex-related properties are 100% supported by all modern browsers, and IE.
		</p>

		<figure>
			<img src="images/flexbox-support.png" alt="can i use support table for flexbox, showing support in all major browsers">
			<figcaption>Source: <a href="https://caniuse.com/#feat=flexbox">Can I Use</a></figcaption>
		</figure>

		<p>
			However, there are a couple of known bugs in IE that aren't likely to be fixed.
		</p>
		<ul>
			<li>If the content of your flex container is overflowing unexpectedly, try setting <code>max-width: 100%</code></li>
			<li>
				The <code>flex-basis</code> value in the <code>flex</code> shorthand requires a unit, even when it's 0. So you'll 
				need to do something like <code>flex: 1 0 0%</code>
			</li>
		</ul>
		<p>
			For a full list of known bugs, refer to the Known Issues tab on the <a href="https://caniuse.com/#feat=flexbox">Flexbox page on 
			Can I Use</a>.
		</p>

		<p>
			If you're looking for any more help with flex, then you should check out the definitive guide: 
			CSS Tricks' <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">Complete Guide to Flexbox</a>.
		</p>

		<h3><code>display: grid</code></h3>

		<p>
			Grid is perhaps the most useful CSS layout available. It allows us to create dynamic, responsive, two-dimensional layouts.
			This is not to say that we don't need flexbox anymore though! It's often simpler to setup a flex layout than a grid, and there are 
			some things you can do in flexbox that you just can't manage in grid. Both are useful, and have their place. However, grid does 
			simplify some of the things we used to rely on flexbox for.
		</p>

		<p>
			Like flexbox, the <code>display: grid</code> property is applied to the container elements, and affects the layout of the children 
			of the container. Unlike flexbox though we can visualise how the grid is going to behave without any actual elements in it.
		</p>

		<p>
			For this next section, I highly recommend using Firefox, as the Firefox dev tools includes a grid inspector which I find 
			invaluable when working with grid.
		</p>

		<div class="example grid dev-tools">

		</div>

		<style>
			.example.dev-tools {
				grid-template-columns: 1fr 1fr;
				grid-template-rows: 1fr 1fr;
				height: 400px;
			}
		</style>

		<p>To use the grid inspector in Firefox</p>
		<ol>
			<li>Right-click on the example above and select Inspect Element</li>
			<li>
				Click on the grid tag beside the element in the Inspector.
				<img src="images/grid-tag.png" alt="Location of grid tag in Inspector">
			</li>
		</ol>

		<div class="needs-example">what it looks like with the grid inspector turned on</div>

		<p>
			Our example here defines a 2x2 grid, using three CSS properties.
		</p>

		<pre><code class="css">
			display: grid;
			grid-template-columns: 1fr 1fr;
			grid-template-rows: 1fr 1fr;
		</code></pre>

		<p>
			<code>display: grid</code> makes our container a grid. <code>grid-template-columns</code> takes a list of widths. It will create 
			a column of the given width for each width in the list. In our case, we've got two columns, each 1fr wide.
			<code>grid-template-rows</code> takes a list of heights and creates a row of the given height for each height in the list. So 
			we've got two rows, each 1fr high. And, altogether, we've got a 2x2 grid, where each cell is 1fr x 1fr.
		</p>

		<p>
			At this point, you might be wondering what an <code>fr</code> is. This is a good question. <code>fr</code> stands for "fraction 
			of the available space", and it works just like <code>flex-grow</code> does in a flexbox. So, to calculate the widths of the 
			columns in the above example, the browser is going to work out how much space is availale to start with - 100% of the width of 
			the grid element. Then it's going to add up how many <code>fr</code>s there are altogether - 1fr + 1fr = 2fr. Then, divide the 
			amount of space by the number of <code>fr</code>s to calculate how much space each <code>fr</code> gets - 100% / 2 = 50%. Then
			assign that much space to each <code>fr</code>. In our example, each column is 50% of the width of the container. 
		</p>

		<p>
			This example is a little simplistic though. We could also have different sized columns - say 
			<code>grid-template-columns: 4fr 1fr</code>. In this case, there are 5frs altogether, so each fr receives 20% of the space
			(100% / 5 = 20%). The first column is 4frs wide, so it receives 80% (20% x 4 = 80%). The second column is 1fr, so it just gets 20%.
		</p>

		<div class="needs-example">grid to check out in grid inspector</div>

		<p>
			We can also mix units, like <code>grid-template-columns: 100px 1fr</code>. In this case, the first column will always be 100px 
			wide, no matter the size of the container. The second column will take up the remaining space.
		</p>

		<div class="needs-example">grid inspector</div>

		<p>
			And we can do more complicated stuff, like combinations of different units and multiple fr units, like
			<code>grid-template-columns: 200px 1fr 2em 3fr</code>. So how wide is each column here? Let's say the container is 500px 
			wide and 1em is 12px.
		</p>

		<ol>
			<li>Calculate how much space is used by the fixed width elements: 200px + 2em = 200px + 2 * 12px = 224px</li>
			<li>Calculate how much space is remaining: 500px - 224px = 276px</li>
			<li>Add up all the frs: 1fr + 3fr = 4fr</li>
			<li>Calculate how much space per fr = 276px / 4fr = 69px/fr</li>
			<li>Multiple frs by space per fr to get sizes: 1fr * 69px/fr = 69px; 3fr * 69px/fr = 207px</li>
		</ol>

		<p>This gives us final column sizes of 200px, 69px, 24p, 207px.</p>

		<p>
			Don't worry - you'll never really need to do this maths yourself! If you want to see how big your columns are, just stick them in 
			the dev tools and play around.
		</p>

		<p>
			So, why do we use frs instead of just sticking with percentages? Well, the maths is easier, especially if you're mixing units, and 
			you can't get it wrong and end up with columns adding up to more than 100%. It also makes it super easy to add and remove columns 
			without needing to recalculate everything, which also works well in responsive designs, where you might have different numbers of 
			columns on different size screens. There are also a couple of other advantages we'll get to later.
		</p>

		<p>
			Ok, so this is all well and good, but a grid with nothing in it is pretty boring. So let's see what happens when we add some 
			elements.
		</p>

		<div class="example grid placing-elements">
			<div class="element">1</div>
			<div class="element">2</div>
			<div class="element">3</div>
		</div>

		<style>
			.placing-elements {
				grid-template-columns: 1fr 1fr;
				grid-template-rows: 1fr 1fr;
				height: 400px;
			}

			.placing-elements .element {
				width: 100px;
				height: 100px;
			}
		</style>

		<p>
			You can see the elements get placed along the first row, until that row fills up. Then we start filling up the next row.
			And so on until we run out of elements. If we prefer to fill up the columns first, we can do that by setting 
			<code>grid-auto-flow: column</code>.
		</p>

		<div class="example">
			<input type="radio" name="grid-auto-flow" id="auto-flow-row" value="row">
			<label for="auto-flow-row">grid-auto-flow: row</label>
			<input type="radio" name="grid-auto-flow" id="auto-flow-column" value="column">
			<label for="auto-flow-column">grid-auto-flow: column</label>
			<div class=" placing-elements container grid">
				<div class="element">1</div>
				<div class="element">2</div>
				<div class="element">3</div>	
			</div>
		</div>

		<script>
			const container = document.querySelector('.placing-elements.container');
			document.querySelectorAll('input[id^=auto-flow').forEach((input) => {
				input.addEventListener('change', function () {
					container.style.gridAutoFlow = this.value;
				});
			});
			document.getElementById('auto-flow-row').checked = true;
		</script>

		<p>
			Also by default, each element is placed in the upper left corner of the cell (in a left-to-right, top-to-bottom language - more 
			generally, each element is placed at the point where you would start reading in the current language). We can change this, using 
			the same kind of properties we used in flexbox - <code>align-items</code>, <code>align-self</code>, <code>justify-items</code>,
			<code>justify-self</code>. You'll notice grid lacks <code>align/justify-content</code>. This is because the grid rows and columns
			essentially cover this functionality, while giving us much more fine-grained control. We've also gained 
			<code>justify-items/self</code>, because, in a grid context we <i>can</i> place elements relative to their neighbours in the inline
			direction.
		</p>

		<p>
			Just like with flexbox, <code>*-items</code> properties are placed on the container element, and control placement for all items 
			in the grid. <code>*-self</code> properties are placed on the items themselves, and only change the placement of a specific item.
			<code>*-self</code> properties override <code>*-items</code> properties.
		</p>

		<p>
			As with flexbox, we can choose between the values <code>start</code>, <code>center</code>, <code>end</code>, and <code>stretch</code>.
			(Note that <code>stretch</code> has the same effect as <code>start</code> when applied to an element with an explicit width or height, 
			like the elements in the example below.)
		</p>

		<div class="example align-justify">
			<label for="align-items">align-items</label>
			<select name="align-items" id="align-items">
				<option value="start">start</option>
				<option value="center">center</option>
				<option value="end">end</option>
				<option value="stretch">stretch</option>				
			</select>
			<label for="justify-items">justify-items</label>
			<select name="justify-items" id="justify-items">
				<option value="start">start</option>
				<option value="center">center</option>
				<option value="end">end</option>
				<option value="stretch">stretch</option>				
			</select>
			<div class="container placing-elements grid">
				<div class="element">
					1
					<label for="align-self-1">align-self</label>
					<select name="align-self-1" id="align-self-1">
						<option value="start">start</option>
						<option value="center">center</option>
						<option value="end">end</option>
						<option value="stretch">stretch</option>				
					</select>
					<label for="justify-self-1">justify-self</label>
					<select name="justify-self-1" id="justify-self-1">
						<option value="start">start</option>
						<option value="center">center</option>
						<option value="end">end</option>
						<option value="stretch">stretch</option>				
					</select>		
				</div>
				<div class="element">		
					2	
					<label for="align-self-2">align-self</label>
					<select name="align-self-2" id="align-self-2">
						<option value="start">start</option>
						<option value="center">center</option>
						<option value="end">end</option>
						<option value="stretch">stretch</option>				
					</select>
					<label for="justify-self-2">justify-self</label>
					<select name="justify-self-2" id="justify-self-2">
						<option value="start">start</option>
						<option value="center">center</option>
						<option value="end">end</option>
						<option value="stretch">stretch</option>				
					</select>
					</div>
				<div class="element">
					3
					<label for="align-self-3">align-self</label>
					<select name="align-self-3" id="align-self-3">
						<option value="start">start</option>
						<option value="center">center</option>
						<option value="end">end</option>
						<option value="stretch">stretch</option>				
					</select>
					<label for="justify-self">justify-self</label>
					<select name="justify-self" id="justify-self">
						<option value="start">start</option>
						<option value="center">center</option>
						<option value="end">end</option>
						<option value="stretch">stretch</option>				
					</select>		
				</div>
			</div>
		</div>

		<style>
			.align-justify .placing-elements .element {
				width: 150px;
				height: 150px;	
			}
		</style>

		<script>
			const alignJustifyContainer = document.querySelector('.align-justify .container');
			document.querySelectorAll('.align-justify select[id$=items]').forEach((select) => {
				select.selectedIndex = 0;

				select.addEventListener('change', function () {
					alignJustifyContainer.style[this.id] = this.value;
				});
			});

			document.querySelectorAll('.align-justify .element select').forEach((select) => {
				select.selectedIndex = 0;
				select.addEventListener('change', function () {
					const property = `${this.id.split('-')[0]}-self`;
					this.parentElement.style[property] = this.value;
				})
			});
		</script>

		<p>
			While this is pretty handy, often we actually want the elements to resize relative to the size of the grid cells.
			We can do this by setting the width and height as percentages. The percentages will be treated as percentages of the
			size of the cell, rather than the size of the parent element.
		</p>

		<div class="example grid placing-elements relative-size resize">
			<div class="element" style="width: 100%; height: 100%">
				width: 100%; height: 100%;
			</div>
			<div class="element" style="width: 80%; height: 80%">
				width: 80%;
				height: 80%;
			</div>
			<div class="element" style="width: 40%; height: auto; min-width: min-content; height: auto">
				width: 40%;
				height: auto
			</div>
		</div>

		<style>
			.relative-size {
				align-items: center;
				justify-items: center;
			}
		</style>

		<p>
			We can stop the smallest element shrinking down too narrow to fit its content by adding <code>min-width: min-content</code>. 
			As you might recall from earlier, this will set its minimum width to the smallest size which will accomodate its content -
			essentially the length of the longest word it contains.
		</p>

		<p>
			Now we could use this as a way of creating gaps between cells - set the elements sizes as a percentage of the size of the cell
			that's just a bit small than 100%, and voila!
		</p>

		<div class="example grid placing-elements percent-gap resize">
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
			<div class="element"></div>
		</div>

		<style>
			.percent-gap .element {
				width: 90%;
				height: 90%;
			}
		</style>

		<p>
			This makes our grid a little lop-sided though. If we align all our items to the left, we get a gap on the right. If we align them in the 
			center, we get a gap around the outside. Plus, it's difficult to make our row and column gaps the same. Luckily, grid provides us 
			with a better way to handle this - the aptly named <code>grid-gap</code>.
		</p>

		<p>
			You can set <code>grid-gap</code> to be a specific measurement, like 10px, or 1em. Or you can use a percentage. The percentage will be 
			calculated from the width of the entire grid for the column gaps, and the height of the entire grid for the row gaps (potentially leading 
			to uneven row and column gaps again, but sometimes that's what you want). You can also set the row and column gaps to be different 
			deliberately, by padding in to values, like <code>grid-gap: 10px 20px</code>. The first value is the row gap, the second is the column gap.
		</p>

		<div class="example grid-gap">
			<label for="grid-gap">grid-gap</label>
			<input type="text" id="grid-gap" placeholder="10px 10px">
			<div class="container grid placing-elements resize">
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
				<div class="element"></div>
			</div>
		</div>

		<style>
			.grid-gap .container .element {
				width: 100%;
				height: 100%;
			}
		</style>

		<script>
			const gridGapContainer = document.querySelector('.grid-gap .container');
			document.getElementById('grid-gap').addEventListener('change', function () {
				gridGapContainer.style.gridGap = this.value;
			});
		</script>

		<p>
			<code>grid-gap</code> is another reason to prefer fr over percentages. fr will take the gap into account automatically. 
			While it's entirely possible to do this with percentages, using <code>calc()</code>, it's far, far more difficult.
		</p>

		<p>
			On top of all this, we can also place elements so that they take up more than one cell. We can do this by making them 
			span multiple rows and/or columns. The resulting shape will still always be a rectangle though.
		</p>

		<p>
			There are a couple of ways we can do this. The first is to specify which row/column we want to element to start/end in,
			using <code>grid-row</code> and <code>grid-column</code>.
			Rows and columns are numbered starting at 1. We can also refer to a row/column relative to the end of the grid using 
			negative numbers. So, we could specify that we want an element to cover all of the cells in its row, we could 
			use <code>grid-column: 1 / -1</code>. Other elements will be shuffled around the element, according to a complex 
			algorithm that we're not going to look at today. If you're interested, start with the 
			<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Auto-placement_in_CSS_Grid_Layout">
				MDN article on Auto-placement in CSS Grid Layout
			</a>
		</p>

		<div class="example grid-row">
			<label for="grid-row">grid-row</label>
			<input type="text" id="grid-row" placeholder="1 / -1">
			<label for="grid-column">grid-column</label>
			<input type="text" id="grid-column" placeholder="1 / -1">
			<div class="container grid">
				<div class="element"></div>
				<div class="element highlight"></div>
				<div class="element"></div>
			</div>
		</div>

		<style>
			.grid-row .container {
				grid-template-columns: repeat(8, 1fr);
				grid-template-rows: repeat(8, 1fr);
				height: 400px;
			}

			.grid-row .container .element {
				width: 100%;
				height: 100%;
			}
		</style>

		<script>
			const gridRowElement = document.querySelector('.grid-row .highlight');
			document.querySelectorAll('.grid-row input').forEach((input) => {
				input.value = '';
				input.addEventListener('change', function () {
					gridRowElement.style[this.id] = this.value;
				});
			})
		</script>

		<p>
			If we want an element to cover multiple row/columns, but we're not sure exactly where in the grid it is, we can 
			use the <code>grid-row/column</code> property with a <code>span</code> value. <code>grid-column: span 2</code> will 
			cause the element to cover two columns, without affecting its start position. We can also combine span with start or 
			end values. <code>grid-column: span 4 / -1</code> will place the element across four columns, ending in the last one.
		</p>

		<p>You can try out span values in the example above.</p>

		<p>
			The final way that we can cause an element to cover several cells is by using <code>grid-template-areas</code> with
			<code>grid-area</code>grid-template-areas</code> to create a kind of ascii map of how want our grid to be laid out.
		</p>

		<div class="needs-example">media object using grid-area</div>

		<p>
			While these properties provide a very powerful way of rearranging your grid, you should bear in mind the same caveats 
			as when reordering flexboxes. The tab order will follow the document order, not the visible order, so extensively
			rearranged elements can result in an inaccessible experience. For this reason, I'd suggest preferring a single 
			<code>span</code> value of specifying start and end values, and ensuring that your <code>grid-template-areas</code>
			follow your source order fairly closely.
		</p>

		<p>
			Everything we've looked at so far has assumed that we know how many elements are going to be in our grid. 
			Often though, that isn't the case. Luckily, grid has us covered there too!
		</p>

		<p>
			If we add more elements than we have defined in our grid, the browser will just add another row to the grid 
			and continue adding elements there.(If you're using <code>grid-auto-flow: column</code>, then it will add a 
			new column instead.) The new row will follow the same template as your other rows, and have a height of 
			<code>auto</code>. <div class="needs-example">what does height of auto actually mean</div>
		</p>

		<p>
			Additional rows that are added like this are called the "implicit grid". (Rows and columns that are defined 
			explicitly are called the "explicit grid".) <span class="needs-example">In Firefox grid inspector, implicit 
			grid is indicated by dashed lines.</span> The most important difference between the implicit and explicit grids 
			is that you can't place elements using negative track numbers. In the implicit grid, the browser doesn't know 
			how many rows/columns there's going to be until after it's placed all the items in them, so it doesn't know 
			where the last row/column is going to be! <span class="needs-example">what happens with template areas?</span>
		</p>

		<div class="example implicit-grid">
			<label for="grid-template-columns">grid-template-columns</label>
			<input type="text" id="grid-template-columns">
			<label for="grid-template-rows">grid-template-rows</label>
			<input type="text" id="grid-template-rows">
			<button id="add-grid-item">Add element to grid</button>
			<div class="container grid">
				<div class="element" contenteditable="true">1</div>
				<div class="element" contenteditable="true">2</div>
				<div class="element" contenteditable="true">3</div>
				<div class="element" contenteditable="true">4</div>
			</div>
		</div>

		<style>
			.implicit-grid .container {
				height: 500px;
			}
			.implicit-grid .element {
				width: 100%;
				height: 100%;
			}
		</style>

		<script>
			
		</script>

	

		<div class="incomplete">
		what happens when we add more elements than there are cells & the implicit grid
		when we care about how big the columns are, not how many there are
		when we want the columns to resize within a certain range
		reordering elements in grid with the same warning as flex
		</div>

		<h3 class="incomplete"><code>columns</code></h3>

		<h3 class="incomplete"><code>float</code></h3>

	</section>

	<section><h2 class="incomplete" id="conclusion">Wrap up</h2></section>
</body>
</html>